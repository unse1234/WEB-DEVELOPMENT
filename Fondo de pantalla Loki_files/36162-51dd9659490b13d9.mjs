(self.modernJsonp=self.modernJsonp||[]).push([["36162"],{284772(e,a,o){o.d(a,{M_:()=>s,SS:()=>n,by:()=>i,lq:()=>l});let l=e=>/instagram/i.test(e||""),n=e=>l(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),t="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(t),s=e=>(e||"").includes(t)},926608(e,a,o){o.d(a,{$5:()=>b,Ay:()=>P,B0:()=>g,Fo:()=>S,Q7:()=>O,Rl:()=>p,YG:()=>c,_s:()=>C,lE:()=>w,n9:()=>y,oO:()=>_,xR:()=>v,zZ:()=>m});var l=o(859471),n=o(106386),t=o(523422),i=o(60739),s=o(668779),d=o(726329);let r=Date.now(),_=()=>(0,d.kF)(),u=()=>Date.now()-r,p=()=>(0,n.d4)(e=>e.currentUserTracker?.storageAccessAllowed??0),c=()=>(0,n.d4)(e=>e.currentUserTracker?.visitedUnauthPages??t.Ic),g=()=>(0,n.d4)(e=>e.currentUserTracker?.closeupPins??t.zF),m=()=>(0,n.d4)(e=>e.currentUserTracker?.completedSearches??t.xg),b=()=>(0,n.d4)(e=>e.currentUserTracker?.clickthroughPins??t.vC),v=()=>(0,n.d4)(e=>e.currentUserTracker?.savedPins??t.BP),h=()=>(0,n.d4)(e=>e.currentUserTracker?.revisitationState??(0,t.Cj)()),w=()=>{let e=(0,n.wA)();return(0,l.useCallback)((a,o)=>{e((0,i.z9)(a,o))},[e])},y=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.jx)(a))},[e])},S=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.ab)(a))},[e])},O=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.Ww)(a))},[e])},C=()=>{let e=(0,n.wA)();return(0,l.useCallback)(()=>{e((0,i.px)())},[e])},P=()=>{let e,a,o,t,d,r,P,T=(0,n.d4)(e=>e.currentUserTracker?.isAuthenticated??0),E=(0,n.d4)(e=>e.currentUserTracker?.country??""),I=(0,n.d4)(e=>e.currentUserTracker?.region??""),L=p(),f=c(),N=g(),M=m(),k=b(),D=(0,n.d4)(e=>e.currentUserTracker?.downloadedPinsCount??0),x=v(),U=(0,n.d4)(e=>e.currentUserTracker?.isQUS??0),A=h(),R=(0,n.d4)(e=>e.currentUserTracker?.daysSinceLastRevisitation??0),G=(0,n.d4)(e=>e.currentUserTracker?.isIAB??!1),q=(0,n.d4)(e=>e.currentUserTracker?.landingPageViewType??202),F=w(),W=y(),V=S(),B=O(),H=C(),K=(e=(0,n.wA)(),(0,l.useCallback)(a=>{e((0,i.vK)(a))},[e])),$=(a=(0,n.wA)(),(0,l.useCallback)(e=>{a((0,i.rh)(e))},[a])),Q=(o=(0,n.wA)(),t=h(),(0,l.useCallback)(()=>{let{state:e,wasUpdated:a}=(0,s.A)(t);a&&o((0,i.rh)(e))},[o,t])),j=(d=(0,n.wA)(),r=h(),(0,l.useCallback)(()=>{d((0,i.rh)({sessionTimestamps:r.sessionTimestamps}))},[d,r]));return{isAuthenticated:T,isStorageAllowed:L,isQUS:U,isIAB:G,landingPageViewType:q,setLandingPageViewType:(P=(0,n.wA)(),(0,l.useCallback)(e=>{P((0,i.gv)({viewType:e}))},[P])),closeupPins:N,visitedPages:f,setVisitedPage:F,completedSearches:M,setCompletedSearch:W,removeCompletedSearch:V,clickthroughPins:k,setClickthroughPin:B,downloadCount:D,updateDownloadCount:H,savedPins:x,setSavedPins:K,revisitationState:A,daysSinceLastRevisitation:R,updateRevisitation:$,trackSessionStart:Q,trackSessionEnd:j,getPinImpressionCount:_,getSessionDuration:u,country:E,region:I}}},60739(e,a,o){o.d(a,{KK:()=>n,Ww:()=>d,ab:()=>s,gv:()=>p,jx:()=>i,px:()=>r,rh:()=>u,vK:()=>_,z9:()=>t});let l="local",n={ADD_VISITED_PAGE:"ADD_VISITED_PAGE",ADD_COMPLETED_SEARCH:"ADD_COMPLETED_SEARCH",REMOVE_COMPLETED_SEARCH:"REMOVE_COMPLETED_SEARCH",ADD_CLICKTHROUGH_PIN:"ADD_CLICKTHROUGH_PIN",UPDATE_DOWNLOAD_COUNT:"UPDATE_DOWNLOAD_COUNT",UPDATE_SAVED_PINS:"UPDATE_SAVED_PINS",UPDATE_REVISITATION:"UPDATE_REVISITATION",SET_LANDING_PAGE_VIEW_TYPE:"SET_LANDING_PAGE_VIEW_TYPE"},t=(e,a)=>({type:n.ADD_VISITED_PAGE,payload:{path:e,pageType:a,storageType:l}}),i=e=>({type:n.ADD_COMPLETED_SEARCH,payload:{search:e,storageType:l}}),s=e=>({type:n.REMOVE_COMPLETED_SEARCH,payload:{query:e,storageType:l}}),d=e=>({type:n.ADD_CLICKTHROUGH_PIN,payload:{pin:e,storageType:l}}),r=()=>({type:n.UPDATE_DOWNLOAD_COUNT,payload:{storageType:l}}),_=e=>({type:n.UPDATE_SAVED_PINS,payload:{pins:e,storageType:l}}),u=e=>({type:n.UPDATE_REVISITATION,payload:{revisitation:e,storageType:l}}),p=({viewType:e})=>({type:n.SET_LANDING_PAGE_VIEW_TYPE,payload:{viewType:e}})},693446(e,a,o){function l(e,a){let{sessionTimestamps:o}=e,l=Date.now()-864e5*a;return o.filter(e=>e>=l).length}function n(e,a){let o=[...e,Date.now()];return o.length>a?o.slice(-a):o}o.d(a,{A:()=>l,c:()=>n})},668779(e,a,o){o.d(a,{A:()=>t});var l=o(523422),n=o(693446);let t=e=>e&&e.sessionTimestamps&&!(e.sessionTimestamps.length<1)&&e.ts?new Date().getTime()-e.ts>l.H3?{state:{...e,sessionTimestamps:(0,n.c)(e.sessionTimestamps,50)},wasUpdated:!0}:{state:e,wasUpdated:!1}:{state:(0,l.Cj)(),wasUpdated:!0}},11978(e,a,o){o.d(a,{A:()=>n});var l=o(601185);function n(e){let{expName:a,anyEnabled:o,group:n}=function({experimentsClient:e,skipActivation:a}){let{checkExperiment:o}=e,l=o("web_masonry_v2",{dangerouslySkipActivation:a});return l.group?{expName:"web_masonry_v2",...l}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,l.A)(),skipActivation:e?.skipActivation??!1});return{expName:a,anyEnabled:o,group:n,isMeasureAllEnabled:"enabled_measure_all"===n||"enabled_measure_all_impression_fix"===n,isImpressionFixEnabled:"control_impression_fix"===n||"enabled_impression_fix"===n||"enabled_measure_all_impression_fix"===n}}},726329(e,a,o){o.d(a,{bi:()=>y,g$:()=>S,kF:()=>v});var l=o(859471),n=o(844255);let t=["ar","he"];var i=o(586733),s=o(11978),d=o(123576),r=o(971289),_=o(377489),u=o(696591),p=o(807782),c=o(788446),g=o(81920),m=o(912849);let b=0,v=()=>b,h={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},w=({events:e,startTime:a,endTime:o})=>e?.filter(e=>e>=a&&e<=o)||[];function y({carouselData:e,closeupImpressionType:a,closeupNavigationType:o,componentType:v,contextLogData:y,clientTrackingParams:S,duploShouldTrackPinEvents:O,elementType:C,impressionAuxFields:P,inImpressionExp:T,impressionType:E,impressionsFramework:I,isPaused:L,loggingId:f,objectIdStr:N,slotIndex:M,trackCarousel:k,viewData:D,viewParameter:x,viewType:U,isPromoted:A,storyPinProductEventData:R}){let{logContextEvent:G}=(0,i.o)(),{logMrcVideoAdEventOnPlay:q}=(0,_.y)(),{addImpression:F}=(0,u._1)()||{},{logStat:W}=(0,p.xI)(),V=(0,c.A)(),B=(0,r.qJ)(),{isRTL:H}=(()=>{let{locale:e}=(0,n._8)();return{isRTL:(0,l.useMemo)(()=>{let a=(e??"").split("-")[0];return t.includes(a)},[e])}})(),K=I||d.A,$=(0,l.useRef)(null),Q=(0,l.useRef)(e=>{});Q.current=l=>{let n=h[E],t=n.idType,i={clientTrackingParams:S,endTime:l.endTime,[t]:f,slotIndex:M,time:l.startTime,renderDuration:l.endTime-l.startTime,type:a,...P,forcedExit:"removed"===l.forcedExit?0:void 0};if("Pin"===E){b+=1;let e=[],a=l.visibleEvents||new Map,o=l.hiddenEvents||new Map;if((P&&P.isPromoted||A)&&[1,50,80,2,102].forEach(n=>{let t=w({events:a.get(n),startTime:l.startTime,endTime:l.endTime}),i=w({events:o.get(n),startTime:l.startTime,endTime:l.endTime});t.forEach(a=>{e.push({type:n,time:a||0,visible:!0})}),i.forEach(a=>{e.push({type:n,time:a||0,visible:!1})})}),i={...i,pinCellWidth:l.pinCellWidth||0,pinCellHeight:l.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)},$.current){let e=$.current.getBoundingClientRect(),a=window.scrollX||document.documentElement.scrollLeft,o=e.left+a;y={...y||{},number_of_columns:i.windowWidth&&i.pinCellWidth?Math.round((i.windowWidth-(H&&B?0:V))/i.pinCellWidth):null},i.columnIndex=i.pinCellWidth?Math.round((o-(H&&B?0:V))/i.pinCellWidth):void 0}P?.nearDupSignature&&F&&v&&i.renderDuration&&[13007,13176,68].includes(v)&&F(P.nearDupSignature,i.renderDuration)}let s={component:v,object_id_str:N,view_type:U,view_data:D||{},view_parameter:x};if(k)e&&k&&G({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...i,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...s,aux_data:{...y}});else{let e={clientTrackingParams:S,event_type:n.eventType,...s,element:C,event_data:{[n.impressionType]:"Story"===E?i:[i],...R?{storyPinProductEventData:R}:{}},aux_data:{closeup_navigation_type:o,...y}};G(e),q(e)}O&&W("log_pin_impression")};let{expName:j,group:z}=(0,s.A)({skipActivation:!0}),Y=(0,r.Ay)(),J=(0,m.AJ)(),{isAuthenticated:X}=(0,n._8)(),Z=(0,l.useCallback)(()=>{let e=!1;try{let{current:a}=$;if(a instanceof HTMLElement&&(!A||a.getElementsByTagName("img").length>0)){let o=K.start(a);o.onExitViewport(Q.current).setDebugId(f||"unknown"),O&&o.onEnterViewport(()=>{W("log_pin_impression_track_enter_viewport")}),e=!0,z&&(0,g.GV)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Y,experimentName:j,group:z,handlerId:J,isAuthenticated:X,slotIndex:M??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}O&&W("log_pin_impression_track",{didStartTracking:e})},[$.current]);return(0,l.useEffect)(()=>(T&&!K.inExperiment&&K.setExperimentStatus(!0),L||Z(),()=>{let{current:e}=$;e instanceof HTMLElement&&(!A||e.getElementsByTagName("img").length>0)&&K.stop(e)}),[L,Z]),$}let S=({children:e,...a})=>e({impressionTrackerRef:y(a)})},536888(e,a,o){o.d(a,{F:()=>t,I:()=>n});var l=o(804395);function n(e,a){(0,l.A)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function t(e,a){(0,l.A)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},855674(e,a,o){o.d(a,{h:()=>t,w:()=>n});var l=o(752159);function n({PES:e,NUS:a,conversionIntentLevel:o,triggerAction:n,deviceType:t}){(0,l.PM)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:o,upsell_type_tag:"conversion",trigger_action:n,device_type:t})}function t({upsellType:e,decision:a,intentLevel:o,PES:n,NUS:t,experimentVariant:i}){(0,l.PM)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:o,pes:n,nus:t,experiment_variant:i})}},476084(e,a,o){o.d(a,{A:()=>s});var l=o(859471),n=o(106386),t=o(926608),i=o(601185);let s=()=>{let e=(0,n.wA)(),{checkExperiment:a}=(0,i.A)(),o=(0,n.d4)(e=>e.currentUserTracker);return(0,l.useCallback)(l=>{let n={...o,pinImpressionCount:(0,t.oO)()};"function"==typeof l?e(l({checkExperiment:a,currentUserTracker:n})):e({...l,payload:{..."payload"in l?l.payload:{},checkExperiment:a,currentUserTracker:n}})},[e,a,o])}},335081(e,a,o){o.d(a,{Ay:()=>S,kX:()=>v,mz:()=>y,vp:()=>c});var l=o(859471),n=o(106386),t=o(401691),i=o(284772),s=o(926608),d=o(484409),r=o(806762),_=o(81920);let u=Date.now(),p=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),c=()=>(0,n.d4)(e=>e.upsell?.modal),g=()=>Date.now()-u,m=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),b=()=>(0,n.d4)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),v=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal),h=Object.freeze(["CO","ID"]),w=e=>{if(!(0,i.SS)(e))return!1;let a=(0,d.V2)();return a.getItem(t.Ng)||((0,_.GV)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(t.Ng,"1")),!0},y=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:o,country:l,userAgent:n})=>!e&&!(a||o&&h.includes(l)||(0,r.K)()||w(n));function S(){let e,a,o,t,i=p(),d=(0,n.d4)(e=>e.upsell?.mWebSignupModal.modal),_=(0,n.d4)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount);return{isModalShown:i,modal:d,upsellEligibleNavigationCount:_,isUnauthSharingModalsShown:m(),modalHasShown:b(),isUpsellEnabledGlobally:(e=p(),a=m(),o=b(),t=(0,n.d4)(e=>e.currentUserTracker),(0,l.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,currentUserTracker:o})=>{let{country:l}=o,n=o.userAgent.raw;return e||a&&h.includes(l)||(0,r.K)()||w(n)})({isUnauthSharingModalsShown:a,modalHasShown:o,currentUserTracker:t}),[e,a,o,t])),getPinImpressionCount:s.oO,getSessionDuration:g}}},211304(e,a,o){o.d(a,{F_:()=>s,GY:()=>l,PO:()=>n,_k:()=>i,fI:()=>d,vR:()=>t});let l="RECORD_NAVIGATIONAL_PAGE",n="UPDATE_LATEST_L1_VERTICAL",t="RESET_UPSELL_TRIGGER_STATE",i="RECORD_SOCIAL_PIN_LANDING_PAGE",s="TRIGGER_SOCIAL_DELAY_MODAL",d="TRIGGER_SOCIAL_SCROLL_MODAL"},948079(e,a,o){o.d(a,{JR:()=>F,tj:()=>W,wz:()=>V});var l=o(115795),n=o(675201),t=o(536888),i=o(855674),s=o(211304),d=o(596664);let r="dweb_eoq_q3_standard",_="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",g="mweb_eoq_q4_emergency_ucan",m="mweb_eoq_q4_advanced_non_ucan",b="mweb_eoq_q4_emergency_non_ucan",v="dweb_eoq_q4_advanced_ucan",h="dweb_eoq_q4_emergency_ucan",w="dweb_eoq_q4_advanced_non_ucan",y="dweb_eoq_q4_emergency_non_ucan",S="pc_mweb_eoq_q1_2026_advanced_ucan",O="pc_mweb_eoq_q1_2026_emergency_ucan",C="pc_mweb_eoq_q1_2026_advanced_non_ucan",P="pc_mweb_eoq_q1_2026_emergency_non_ucan",T="pc_dweb_eoq_q1_2026_advanced_ucan",E="pc_dweb_eoq_q1_2026_emergency_ucan",I="pc_dweb_eoq_q1_2026_advanced_non_ucan",L="pc_dweb_eoq_q1_2026_emergency_non_ucan",f=[{bundleId:"dweb_eoq_q3_standard",experimentKey:r,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:_,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:m,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:b,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:v,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:w,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:h,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:y,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"pc_mweb_eoq_q1_2026_advanced_ucan",experimentKey:S,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"pc_mweb_eoq_q1_2026_emergency_ucan",experimentKey:O,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"pc_mweb_eoq_q1_2026_advanced_non_ucan",experimentKey:C,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"pc_mweb_eoq_q1_2026_emergency_non_ucan",experimentKey:P,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"pc_dweb_eoq_q1_2026_advanced_ucan",experimentKey:T,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"pc_dweb_eoq_q1_2026_advanced_non_ucan",experimentKey:I,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"pc_dweb_eoq_q1_2026_emergency_ucan",experimentKey:E,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"pc_dweb_eoq_q1_2026_emergency_non_ucan",experimentKey:L,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function N(e,a){let o=f.filter(o=>{if(!o.active||!o.overrides[e])return!1;switch(o.experimentKey){case r:return a("dweb_eoq_q3_standard").anyEnabled;case _:return a("dweb_eoq_q3_advanced").anyEnabled;case u:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case g:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case m:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case b:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case v:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case h:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case w:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case y:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;case S:return a("pc_mweb_eoq_q1_2026_advanced_ucan").anyEnabled;case O:return a("pc_mweb_eoq_q1_2026_emergency_ucan").anyEnabled;case C:return a("pc_mweb_eoq_q1_2026_advanced_non_ucan").anyEnabled;case P:return a("pc_mweb_eoq_q1_2026_emergency_non_ucan").anyEnabled;case T:return a("pc_dweb_eoq_q1_2026_advanced_ucan").anyEnabled;case E:return a("pc_dweb_eoq_q1_2026_emergency_ucan").anyEnabled;case I:return a("pc_dweb_eoq_q1_2026_advanced_non_ucan").anyEnabled;case L:return a("pc_dweb_eoq_q1_2026_emergency_non_ucan").anyEnabled;default:return!1}});return o[o.length-1]?.overrides[e]}let M=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return o=>{let{checkExperiment:l,currentUserTracker:n}=o,t=l&&N(e,l)?.evaluateContextOverride||{},i=t[n?.channel??"default"]||t.default||{};return a((0,d.A)(o,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:o,state:l,decision:n})=>{let t=a({action:o,state:l,decision:n});if(!("payload"in o&&"object"==typeof o.payload&&null!==o.payload&&"checkExperiment"in o.payload))return t;let i="currentUserTracker"in o.payload?o.payload.currentUserTracker:void 0,s=N(e,o.payload.checkExperiment)?.stateOverride||{},r=s[i?.channel??"default"]||s.default||{};return 0===Object.keys(r).length?t:(0,d.A)(t,r)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var k=o(438662);let D=e=>{let a=e?.("lop_dweb_blocking_upsell_ucan")?.group??"",o=e?.("lop_dweb_blocking_upsell_non_ucan")?.group??"",l=a||o;return"enabled_1"===l||"enabled_3"===l?{isWashBlocking:!0,isModalNonDismissible:!0}:"enabled_2"===l?{isWashBlocking:!0,isModalNonDismissible:!1}:{isWashBlocking:!1,isModalNonDismissible:!1}},x=["enabled","enabled_no_legal","enabled_copy_2"],U=["enabled_copy_2_no_legal","enabled_copy_2_with_legal"],A=["enabled_copy_2_no_legal","enabled_copy_2_with_legal","enabled_copy_2_no_legal_3_2","enabled_copy_2_with_legal_3_2"],R=["enabled_static","enabled_animated"],G=e=>{let a=e?.("pc_mweb_blocking_upsell_ucan")?.group??"",o=e?.("pc_mweb_blocking_upsell_non_ucan")?.group??"",l=a||o;return"enabled_1"===l||"enabled_3"===l?{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}:"enabled_2"===l?{allowCloseOnOutsideClick:!1,isModalNonDismissible:!1}:{allowCloseOnOutsideClick:!0,isModalNonDismissible:!1}},q=(e,a)=>{let o={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!o&&o.includes(e||"unknown")},F={shouldShowRelatedPinsGradientUpsell:M({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let o=a?.("ce_dweb_unauth_related_pins_limit");return!!o?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:M({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:o})=>!o?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:M({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>{let{checkExperiment:o}=e.payload,l=D(o);return{...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp",...l}}}}}),shouldShowNavigationalModal:M({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:o,checkExperiment:l})=>!l?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(o??4)&&!a,getNextState:({state:e,action:a})=>{let{checkExperiment:o}=a.payload,l=D(o);return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP",...l}},navigationalPagesUpsellSeen:!0}}}),shouldShowNavigationalModalIntentBased:M({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:o})=>{let l=o?.("engagement_score_v0_dweb");if(!l?.anyEnabled||e)return!1;let{conversionIntentLevel:n,PES:s,NUS:d}=a||{},r=q(n,l.group);return(0,t.F)("desktop",{variant:l.group,decision:r?"SHOW":"SKIP",intentLevel:n,PES:s||0,NUS:d||0,reason:r?`Intent ${n} in allowed list`:`Intent ${n} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_desktop",decision:r?"show":"skip",intentLevel:n||"unknown",PES:s||0,NUS:d||0,experimentVariant:l.group}),r},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:o,PES:l,NUS:n}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${o}_pes_${l||0}_nus_${n||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:M({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e,action:a})=>{let{checkExperiment:o}=a.payload??{},l=D(o);return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP",...l}},clickCloseUp:!0}}}),shouldShowSignupModalOnClickContextMenuSaveButton:M({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let o,{checkExperiment:l}=e.payload,n=D(l);return o=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource",...n}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId,...n},{...a,modal:{isShown:!0,displayProps:o},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:M({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let o,l=D(e.payload.checkExperiment);return o=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource",...l}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId,...l},{...a,modal:{isShown:!0,displayProps:o},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:M({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:o})=>!!((e||a)&&!o?.isShown),getNextState:({action:e,state:a})=>{let o,l=D(e.payload.checkExperiment);return o=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell",...l}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId,...l},{...a,modal:{isShown:!0,displayProps:o},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:M({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>{let o=D(e.payload.checkExperiment);return{...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId,...o}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnFollowButtonClick:M({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"upsellRules_unspecified_container",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:M({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:M({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:M({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:M({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:M({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:M({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:o})=>{if(!e||a)return!1;let l=o?.("ce_dweb_unauth_splp_blocking").anyEnabled,n=o?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,t=o?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(l||n||t)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===s.F_?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},W={shouldShowSaveEducationPopover:M({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:o}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!o?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:M({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:o}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!o?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldShowRelatedPinsGradientUpsell:M({id:"mobile_related_pins_gradient_upsell_trigger",evaluate:({checkExperiment:e})=>!!e?.("ce_mweb_unauth_related_pins_limit").anyEnabled,getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0})}),shouldAllowUnauthSave:M({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:o=0,mobileUnauthSaveThreshold:l})=>!a&&!e&&o<(l??2),getNextState:({action:e,state:a})=>{let{checkExperiment:o}=e.payload,l=G(o);return{...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:l.allowCloseOnOutsideClick,isModalNonDismissible:l.isModalNonDismissible},pinId:e.payload.pinId}}}}}),shouldShowMainPinImageNavigationalModal:M({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:o,learningUpsellScenario:l,forceShowModal:n})=>{let t=l&&a&&!o&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return l&&(n||!!t)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:o})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:o,newState:!o}},shouldShowNavigationUpsell:M({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:o,isNavigationFromSwipe:l,currentNavigationCount:n,hasSeenModal:t,pageThreshold:i,isWashDismissible:s,canShowSignupModalOnRouteChange:d,navigationalPagesViewThresholdMobile:r,checkExperiment:_})=>{if(_?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=r||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!l))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!o&&!!_&&(0,k.A)(_,o),c=_?.("mweb_feature_upsell_animated_video")?.group??"",g=R.includes(c),m=_?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",b="control"===m||A.includes(m),v=_?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",h="control"===v||U.includes(v);if(!(o&&d?.(o,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((n??0)>=u)||t)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let w=A.includes(m),y=U.includes(v),S=_?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",O=x.includes(S),C=_?.("mweb_feature_upsell_copy_visual_combination_v2"),P=C?.anyEnabled??!1,T=G(_);return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${u}_${n}`,allowCloseOnOutsideClick:s&&T.allowCloseOnOutsideClick,isModalNonDismissible:T.isModalNonDismissible,headingType:g?"mweb_feature_upsell_animated_visual_combination":h?y?"mweb_feature_upsell_copy_visual_combination_v4":"none":b?w?"mweb_feature_upsell_copy_visual_combination_v5":"none":O?"mweb_feature_upsell_copy_visual_combination_v3":P?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick,isModalNonDismissible:a?.isModalNonDismissible},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:M({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:o,isNavigationFromSwipe:l,hasSeenModal:n,canShowSignupModalOnRouteChange:s,engagementScore:d,checkExperiment:r})=>{let _=r?.("engagement_score_v0_mweb");if(!_?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=!!o&&!!r&&(0,k.A)(r,o),p=r?.("mweb_feature_upsell_animated_video")?.group??"",c=R.includes(p),g=r?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",m="control"===g||A.includes(g),b=r?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",v="control"===b||U.includes(b);if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||l||!o||!s?.(o,u))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(n)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:h,PES:w,NUS:y}=d||{},S=q(h,_.group);if((0,t.F)("mobile",{variant:_.group,decision:S?"SHOW":"SKIP",intentLevel:h,PES:w||0,NUS:y||0,reason:S?`Intent ${h} in allowed list`:`Intent ${h} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_mobile",decision:S?"show":"skip",intentLevel:h||"unknown",PES:w||0,NUS:y||0,experimentVariant:_.group}),!S)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let O=A.includes(g),C=U.includes(b),P=r?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",T=x.includes(P),E=r?.("mweb_feature_upsell_copy_visual_combination_v2"),I=E?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${h}_pes_${w||0}_nus_${y||0}`,allowCloseOnOutsideClick:!0,headingType:c?"mweb_feature_upsell_animated_visual_combination":v?C?"mweb_feature_upsell_copy_visual_combination_v4":"none":m?O?"mweb_feature_upsell_copy_visual_combination_v5":"none":T?"mweb_feature_upsell_copy_visual_combination_v3":I?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick,isModalNonDismissible:a?.isModalNonDismissible},pinId:null}}})}),shouldShowOnLandUpsell:M({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:o,location:t,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:d,shouldTriggerOnLand:r=!1})=>{let _;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let u=!!t&&!!e&&(0,k.A)(e,t);if(!a||o||!(t&&((0,l.dM)(t)||(0,l.iK)(t)||(0,n.A)(t)||(0,l._p)(t)||(0,l.ZX)(t)||u&&(0,l.wd)(t))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(d?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s,c=p?"":e?.("mweb_feature_upsell_animated_video")?.group??"",g=R.includes(c),m=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",b="control"===m||A.includes(m),v=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",h="control"===v||U.includes(v);if(!s&&!r)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let w=A.includes(m),y=U.includes(v),S=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",O=x.includes(S),C=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),P=C?.anyEnabled??!1;if("social"===(_=p?"social":g?"mweb_feature_upsell_animated_visual_combination":h?y?"mweb_feature_upsell_copy_visual_combination_v4":"none":b?w?"mweb_feature_upsell_copy_visual_combination_v5":"none":O?"mweb_feature_upsell_copy_visual_combination_v3":P?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":_="social_visual_1";break;case"enabled_2":_="social_visual_2";break;case"enabled_3":_="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:t,oldLocation:t},headingType:_}}},getNextState:({state:e,decision:a})=>{let{modalConfig:o}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:o?.headingType,trigger:{attributionLabel:o?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:M({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:o})=>(e||a)&&!o?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:o,showDownloadCloseupIcon:l,attributionLabelSource:n,checkExperiment:t}=e.payload,i=G(t),s={trigger:{attributionLabel:`click_${n}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:o||l?"download_limit_reached":"none",allowCloseOnOutsideClick:i.allowCloseOnOutsideClick,isModalNonDismissible:i.isModalNonDismissible};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:s,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:M({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},V={desktop:F,mobile:W}},420818(e,a,o){o.d(a,{$B:()=>es,$D:()=>eU,$n:()=>y,A2:()=>eo,A4:()=>h,AD:()=>T,C8:()=>eP,CV:()=>eh,Dx:()=>ed,EY:()=>R,Eb:()=>eA,Fe:()=>I,G0:()=>E,HI:()=>ex,IP:()=>q,Ip:()=>U,J3:()=>em,J4:()=>eE,JP:()=>L,KL:()=>Y,KP:()=>el,LB:()=>eT,Ll:()=>eG,M:()=>et,Mh:()=>D,My:()=>J,Oy:()=>eb,PH:()=>w,Pm:()=>ef,RD:()=>eq,Rj:()=>ec,SI:()=>H,SJ:()=>X,Ss:()=>v,St:()=>eW,Tt:()=>eV,Uk:()=>Q,V$:()=>ek,Vi:()=>ea,Vl:()=>e_,WD:()=>f,WJ:()=>eR,XV:()=>ee,Y0:()=>eS,Yp:()=>ei,Z2:()=>eI,Z6:()=>er,ZF:()=>b,_7:()=>S,_k:()=>eM,_q:()=>B,bw:()=>eC,cG:()=>en,cM:()=>ew,d6:()=>F,dh:()=>N,eM:()=>eO,f8:()=>ep,fQ:()=>W,gk:()=>V,gl:()=>eL,gr:()=>k,h4:()=>O,hq:()=>z,ib:()=>eD,is:()=>ey,j6:()=>K,jw:()=>$,kx:()=>eu,lI:()=>g,nH:()=>Z,nj:()=>eB,no:()=>j,oW:()=>p,oj:()=>P,op:()=>ev,pV:()=>eg,rD:()=>_,s4:()=>M,sL:()=>m,ts:()=>eN,u5:()=>u,vh:()=>eF,xD:()=>A,xS:()=>G,xl:()=>C,yi:()=>x,zm:()=>c});var l=o(284772),n=o(752159),t=o(335081),i=o(211304),s=o(948079),d=o(349451),r=o(81920);let _="PROCESS_MOBILE_NAVIGATION_CHANGE",u="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",g="UPS_EVENT_DESKTOP_MODAL_SHOW",m="UPS_EVENT_DESKTOP_MODAL_DISMISSED",b="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",v="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",h="TRIGGER_SCROLL_DOWN_UPSELL",w="CLEAR_SCROLL_DOWN_UPSELL",y="DISMISS_BOTTOM_RIGHT_BANNER",S="TRIGGER_SAVE_EDUCATION_POPOVER",O="CLEAR_SAVE_EDUCATION_POPOVER",C="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",P="CLEAR_RELATED_PINS_GRADIENT_UPSELL",T="TRIGGER_MOBILE_RELATED_PINS_GRADIENT_UPSELL",E="TRIGGER_REPLY_TO_SENDER_SHEET",I="CLEAR_REPLY_TO_SENDER_SHEET",L="CLICK_CLOSEUP_UPSELL",f="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",N="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",M="CLICK_FOLLOW_BUTTON_UPSELL",k="CLICK_FOLLOWING_BUTTON_UPSELL",D="CLICK_FOLLOWERS_BUTTON_UPSELL",x="CLICK_COMMENT_COMPOSER_UPSELL",U="CLICK_PIN_LINK_UPSELL",A="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",R="SHOW_MOBILE_SIGNUP_MODAL",G="DISMISS_MOBILE_SIGNUP_MODAL",q="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",F="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",W="HIDE_UNAUTH_SHARING_MODALS",V="SHOW_UNAUTH_SHARING_MODALS",B="RESTORE_FROM_LOCAL_STORAGE",H="MAIN_PIN_IMAGE_CLICK_MOBILE",K="ON_LAND_UPSELL_MOBILE",$="SET_LEARNING_UPSELL_VISIBILITY",Q="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",j="DISMISS_MOBILE_FLOATING_UPSELL",z="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",Y="INCREMENT_PIN_SAVE_COUNT",J="DECREMENT_PIN_SAVE_COUNT",X="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",Z="UPS_EVENT_PIN_SAVE_MOBILE",ee="SET_REFERRED_APP_UPSELL_STATE",ea=e=>({type:B,payload:{upsellEligibleNavigationCount:e}}),eo=e=>({type:u,payload:{upsellReason:e}}),el=(e,a,o,l,n)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:o,viewParameter:l,checkExperiment:n}}),en=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),et=()=>({type:m}),ei=()=>({type:y}),es=e=>({type:g,payload:{displayProps:e}}),ed=()=>({type:L}),er=(e,a,o)=>({type:f,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:o}}),e_=(e,a)=>({type:M,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eu=(e,a,o,l)=>({type:b,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:o,checkExperiment:l}}),ep=()=>({type:k}),ec=()=>({type:D}),eg=()=>({type:x}),em=e=>({type:U,payload:{count:e}}),eb=()=>({type:A}),ev=(e,a)=>({checkExperiment:o,currentUserTracker:l})=>n=>{n({type:i.GY,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:o,currentUserTracker:l}})},eh=e=>({type:i.PO,payload:{l1Vertical:e}}),ew=(e,a)=>({type:i._k,payload:{inviter:e,containerPage:a}}),ey=e=>({checkExperiment:a})=>o=>{o({type:i.F_,payload:{containerPage:e,checkExperiment:a}})},eS=e=>({checkExperiment:a})=>o=>{o({type:i.fI,payload:{containerPage:e,checkExperiment:a}})},eO=()=>({type:O}),eC=()=>({checkExperiment:e})=>a=>{a({type:C,payload:{checkExperiment:e}})},eP=()=>({type:P}),eT=()=>({checkExperiment:e,currentUserTracker:a})=>o=>{let{group:l}=e?.("ce_mweb_unauth_social_feature_education")||{};l?.startsWith("enabled_group_board")?o((({checkExperiment:e})=>a=>{a({type:S,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a})):l?.startsWith("enabled_reply_to_sender")&&o((({checkExperiment:e})=>a=>{a({type:E,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a}))},eE=()=>({type:I}),eI=e=>({type:R,payload:e}),eL=()=>({type:G}),ef=e=>({type:q,payload:{topInterest:e}}),eN=()=>({type:F}),eM=()=>({type:W}),ek=()=>({type:V}),eD=e=>({checkExperiment:a,currentUserTracker:o})=>(l,t)=>{l({type:_,payload:{...e,checkExperiment:a,currentUserTracker:o}});let i=t().upsell;(0,d.A)(i)||(0,n.PM)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},ex=e=>({checkExperiment:a,currentUserTracker:o})=>(i,d)=>{let _=d().upsell,{country:u}=o,p=o.userAgent.raw,c=s.wz.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,t.mz)({isModalShown:_.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:_.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!_.mWebSignupModal.modalHasShown,country:u,userAgent:p}),hasSeenNavUpsell:_.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:l.SS,currentUserTracker:o});c.shouldShowModal&&c.modalConfig&&((0,n.PM)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,r.GV)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:K,payload:{decision:c,checkExperiment:a}}))},eU=e=>({checkExperiment:a,currentUserTracker:o})=>(l,t)=>{let i=t().upsell,d=!!i.appUpsells.learningUpsell?.isShown,r=s.wz.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,currentUserTracker:o,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),_=s.wz.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!r,isLearningAppUpsellShown:d});r?(0,n.PM)("mweb.nav.upsell.show.main_pin_image_click"):_.shouldToggleAppUpsell?_.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),l({type:H,payload:{conversionDecision:r,appUpsellDecision:_,checkExperiment:a,pinId:e.pinId}})},eA=({isShown:e,isDismissedByUser:a=!1})=>({type:$,payload:{isShown:e,isDismissedByUser:a}}),eR=({isDismissedByUser:e=!1}={})=>({type:j,payload:{isDismissedByUser:e}}),eG=(e,a)=>({type:z,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eq=()=>({type:J}),eF=()=>({type:X}),eW=e=>({checkExperiment:a})=>(o,l)=>{let n=l().upsell;s.wz.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!n.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),o({type:Y}),e.handleShowNavFooter(o,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):o({type:Z,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eV=({isShown:e,appUpsellType:a,isBlocking:o})=>({type:ee,payload:{isShown:e,appUpsellType:a,isBlocking:o}}),eB=()=>({checkExperiment:e})=>a=>{a({type:T,payload:{checkExperiment:e}})}},349451(e,a,o){o.d(a,{A:()=>l});let l=e=>{let{modal:a,mWebSignupModal:o,appUpsells:l}=e;return!!(a.isShown||o.modal.isShown||l.learningUpsell?.isShown||l.iabAppUpsell?.isShown)}},438662(e,a,o){o.d(a,{A:()=>n});var l=o(115795);function n(e,a,o=!1){return!!(0,l.wd)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:o}).anyEnabled}},696591(e,a,o){o.d(a,{_1:()=>_,k0:()=>p});var l=o(61163),n=o(859471),t=o(987628),i=o(601185),s=o(81920),d=o(562615);let{Provider:r,getMaybe:_}=(0,t.A)("CloseupNearDupSigsTracker"),u=({group:e,children:a})=>{(0,n.useEffect)(()=>{(0,l.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let o=(0,n.useRef)([]),t=(0,n.useRef)(new Set),i=(0,n.useRef)([]),_=(0,n.useRef)(new Set),u=(0,n.useRef)(null),p=(0,n.useMemo)(()=>e.includes("enabled_2_seconds")?2e9:e.includes("enabled_3_seconds")?3e9:4e9,[e]),c=(0,n.useCallback)((a,o)=>{if(!e.includes("skip_impression")&&!(o<p)){if(_.current.has(a)&&(i.current=i.current.filter(e=>e!==a)),i.current.length>=20){let e=i.current.shift();e&&_.current.delete(e)}_.current.add(a),i.current.push(a)}},[e,p]),g=(0,n.useCallback)(e=>{if(t.current.has(e)&&(o.current=o.current.filter(a=>a!==e)),o.current.length>=10){let e=o.current.shift();e&&t.current.delete(e)}t.current.add(e),o.current.push(e)},[]),m=(0,n.useCallback)(e=>{if(u.current===e)return[];let a=Date.now(),l=Array.from(new Set([...i.current,...o.current]));return u.current=e,(0,s.N9)("closeup_page.near_dup.get_tracked_sigs.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}}),l},[]),b=(0,n.useMemo)(()=>({addImpression:c,addCloseup:g,getTrackedNearDupSigs:m}),[c,g,m]);return(0,d.jsx)(r,{value:b,children:a})},p=({children:e})=>{(0,n.useEffect)(()=>{(0,l.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:a}=(0,i.A)(),{anyEnabled:o,group:t}=a("web_closeup_rabbit_hole_dedup");return o&&t?(0,d.jsx)(u,{group:t,children:e}):(0,d.jsx)(r,{value:void 0,children:e})}},807782(e,a,o){o.d(a,{J0:()=>u,Yj:()=>_,aR:()=>p,xI:()=>d});var l=o(601185),n=o(844255),t=o(971289),i=o(81920);let s=({checkExperiment:e,requestContext:a})=>{let{group:o}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,l)=>(0,i.GV)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:o,browser:a?.userAgent.browserName,platform:a?.userAgent.platform,...l}})}},d=()=>{let e=(0,n._8)(),a=(0,t.qJ)(),{checkExperiment:o}=(0,l.A)(),i=e.isAuthenticated&&!a,d=u({checkExperiment:o,isAuthenticated:e.isAuthenticated,isDesktop:a});return i&&d.isPartOfExperiment?s({checkExperiment:o,requestContext:e}):{logStat:()=>{}}},r=0,_=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:o}=s({checkExperiment:e});(r+=1)<10&&o(`repin_${r}`)};function u({checkExperiment:e,isDesktop:a,isAuthenticated:o,skipActivation:l}){if(!o)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page",l?{dangerouslySkipActivation:!0}:void 0);return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}{let{anyEnabled:a,group:o}=e("auth_mweb_graphql_pin_page",l?{dangerouslySkipActivation:!0}:void 0);switch(o){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}}function p(){let{checkExperiment:e}=(0,l.A)(),a=(0,t.qJ)(),{isAuthenticated:o}=(0,n._8)();return u({checkExperiment:e,isDesktop:a,isAuthenticated:o})}},806762(e,a,o){o.d(a,{F:()=>i,K:()=>t});var l=o(115795),n=o(81920);let t=()=>!1,i=e=>{(0,l.Nz)(e)&&!t()&&(0,n.GV)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/36162-51dd9659490b13d9.mjs.map