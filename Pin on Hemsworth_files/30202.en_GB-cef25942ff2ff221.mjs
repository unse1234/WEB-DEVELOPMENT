(self.modernJsonp=self.modernJsonp||[]).push([["30202"],{731360(e,t,i){var n;i.r(t),i.d(t,{default:()=>a});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FollowButton_pin",selections:[{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:n,storageKey:null}],type:"Pin",abstractKey:null};r.hash="cabaa35ed7d59dee006897bf3ef32e3d";let a=r},127413(e,t,i){i.d(t,{A:()=>a});var n=i(570068);let r=`pulsing {
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
}`,a={css:(0,n.m5)([r]),animation:"pulsing 2s infinite"}},103892(e,t,i){i.d(t,{A:()=>a});var n=i(601185),r=i(971289);function a(){let e=(0,r.M)(),{checkExperiment:t}=(0,n.A)();return{inAffiliateDisclosureEnabled:e?t("mweb_closeup_affiliate_discloseures").anyEnabled:t("web_closeup_affiliate_discloseures").anyEnabled}}},188148(e,t,i){i.d(t,{A:()=>n});function n({maxPrice:e,minPrice:t,price:i}){return e&&t?`${t}-${e}`:i}},331694(e,t,i){i.d(t,{A:()=>s,M:()=>l});var n=i(61163),r=i(859471),a=i(19821),o=i(562615);function s({children:e,fullWidth:t,overrideDataTestId:i}){return(0,r.useEffect)(()=>{(0,n.A)("EnablePointerEvents","/app/packages/PinRep/EnablePointerEvents.tsx")},[]),(0,o.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},"data-test-id":i||"pointer-events-wrapper",children:e})}function l({children:e,enabled:t}){return(0,r.useEffect)(()=>{(0,n.A)("EnablePointerEvents","/app/packages/PinRep/EnablePointerEvents.tsx")},[]),t?(0,o.jsx)(s,{children:e}):e}},458345(e,t,i){i.d(t,{A:()=>p});var n=i(679902),r=i(432321),a=i(427471),o=i(435108),s=i(457315),l=i(81920),d=i(676692),c=i(121066),u=i(399952);let p=function(){let e=(0,r.A)();if(e?.isAuthenticated&&!function(){let e=(0,r.A)(),t=window.location.pathname.startsWith("/settings/notifications"),i=window.location.pathname.startsWith("/reports-and-violations/"),n=window.location.pathname.startsWith("/email/subscription")||window.location.pathname.startsWith("/email/remove")||t,a=window.location.pathname.startsWith("/pin/create/"),o="/pin-builder/"===window.location.pathname&&/url=/.test(window.location.href),{userAgent:s}=e||{userAgent:{isMobile:!1,isTablet:!1}};return s.isMobile||s.isTablet?n||i:a||o||n||i}()){var t,i;let r,p,{viewType:h,viewParameter:m}=(0,d.Cs)()??{},_=(0,c.uy)(window);t={data:{appVersion:(0,u.A)(),auxData:{pwa_type:_&&"unknown"!==_?_:void 0,stage:e.stage??"unknown"},browser:e.userAgent.browserType,clientUUID:(0,n.A)(),event_type:7137,time:1e6*Date.now(),unauth_id:e.unauthId,view_type:h,view_parameter:m}},i=e.isAuthenticated,r=a.A.create("ActiveUserResource",t),p=3e4,r.callCreate().catch(e=>{let n,a=e.message;if(a&&"object"==typeof a){"_t_message"in a&&delete a._t_message;try{n=JSON.stringify(a)}catch(e){n="Unable to serialize error message"}}else n=a;(0,l.GV)("webapp.metrics.dau.errors",{sampleRate:1,tags:{message:n,browser:t.data.browser,error_code:(0,s.A)(e,"api_error_code")||"unknown",is_auth:i}}),setTimeout(()=>{p>o.Qv||(p*=2,r.callCreate())},p)})}}},854846(e,t,i){i.d(t,{J4:()=>o,Mw:()=>n,YH:()=>s,Yv:()=>l,nn:()=>r,sP:()=>a});let n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",BULK_ID_LIBRARY:"BULK_ID_LIBRARY",RESOURCES:"RESOURCES"},r={BILLING_HISTORY:"BILLING_HISTORY",BILLING_RECEIPT:"BILLING_RECEIPT",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_SPEND_SUMMARY:"PREPAID_SPEND_SUMMARY",PREPAID_SPEND_BREAKDOWN:"PREPAID_SPEND_BREAKDOWN",SUMMARY:"SUMMARY"},a={CREATE:"CREATE",MANAGE:"MANAGE",VIEW_REPORT:"VIEW_REPORT",AB_TEST_CREATE:"AB_TEST_CREATE"},o={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:"PINTEREST_EVENTS_OVERVIEW_CAPI_TAB",PINTEREST_EVENT_HISTORY_CAPI_TAB:"PINTEREST_EVENT_HISTORY_CAPI_TAB"},s={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",HOSTNAME:"hostname",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},l={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"}},871292(e,t,i){i.d(t,{A:()=>a});var n=i(752159),r=i(336683);function a(e,t,i){if(t&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){let t=i?window.open(e,"_blank",i):window.open(e,"_blank");return t&&(t.opener=null),t}{let t=(0,r.A)(e);return setTimeout(()=>{(0,n.PM)("setting_new_window_location")},0),window.location.href=t,window}}},729617(e,t,i){i.d(t,{A:()=>l});var n=i(859471);function r(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}function a(){return window.innerWidth}function o(){return window.innerHeight}function s(){return null}function l(){let e=(0,n.useSyncExternalStore)(r,o,s),t=(0,n.useSyncExternalStore)(r,a,s);return null!==e&&null!==t?{height:e,width:t}:null}},431802(e,t,i){i.d(t,{E2:()=>n,I0:()=>l,KU:()=>p,N9:()=>a,Rv:()=>o,X9:()=>r,Yl:()=>u,hh:()=>d,t8:()=>s});let n=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},r=(e,t,i)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(i/255)**2.2,a=e=>{let t=e.replace("#","");return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155},o=({hexColor:e,saturationMultiplier:t,brightnessMultiplier:i,minSaturationClamp:r,mixVal:a=1,minBrightnessClamp:o=0})=>{let s=n(e);null===s&&(s=[229,229,224]);let l=((e,t,i)=>{let n=Math.max(e/=255,t/=255,i/=255),r=n-Math.min(e,t,i),a=0;return 0!==r&&(a=(n===e?(t-i)/r+6*(t<i):n===t?(i-e)/r+2:(e-t)/r+4)*60)<0&&(a+=360),{h:a,s:0===n?0:r/n,b:n}})(...s),d=(e,t,i)=>Math.max(t,Math.min(e,i));l.s=d(l.s*(1+t),r,1),l.b=d(l.b*(1+i),o,1);let c=(({h:e,s:t,b:i})=>{let n=i*t,r=n*(1-Math.abs(e/60%2-1)),a=i-n,o=0,s=0,l=0;return e<60?(o=n,s=r):e<120?(o=r,s=n):e<180?(s=n,l=r):e<240?(s=r,l=n):e<300?(o=r,l=n):(o=n,l=r),{r:Math.round((o+a)*255),g:Math.round((s+a)*255),b:Math.round((l+a)*255)}})({...l}),u=e=>({r:Math.round(c.r*a+e*(1-a)),g:Math.round(c.g*a+e*(1-a)),b:Math.round(c.b*a+e*(1-a))}),p=u(0),h=u(255);return[[p.r,p.g,p.b],[h.r,h.g,h.b]]};function s(e){if("string"!=typeof e)return{r:0,g:0,b:0,a:0};let t=e.trim(),i="rgba"===t.slice(0,4).toLowerCase(),n=!i&&"rgb"===t.slice(0,3).toLowerCase();if(!i&&!n)return{r:0,g:0,b:0,a:0};let r=t.indexOf("("),a=t.indexOf(")",r);if(-1===r||-1===a)return{r:0,g:0,b:0,a:0};let o=t.slice(r+1,a).split(",").map(e=>e.trim());if(i&&4!==o.length||n&&3!==o.length)return{r:0,g:0,b:0,a:0};let[s,l,d,c]=o,u=Number(s),p=Number(l),h=Number(d),m=i?Number(c):1;return[u,p,h].some(e=>Number.isNaN(e))||i&&Number.isNaN(m)?{r:0,g:0,b:0,a:0}:{r:u,g:p,b:h,a:m}}function l(e,t){let i=e.a+t.a*(1-e.a);return 0===i?{r:0,g:0,b:0,a:0}:{r:Math.round((e.r*e.a+t.r*t.a*(1-e.a))/i),g:Math.round((e.g*e.a+t.g*t.a*(1-e.a))/i),b:Math.round((e.b*e.a+t.b*t.a*(1-e.a))/i),a:i}}let d=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,c=e=>e.toString(16).padStart(2,"0"),u=(e,t)=>{let i=n(e);if(!i)throw Error(`Invalid hex color: ${e} for lightenHexByPercentage`);let[r,a,o]=i,s=Math.max(0,Math.min(100,t))/100,l=Math.round(r+(255-r)*s),d=Math.round(a+(255-a)*s),u=Math.round(o+(255-o)*s);return`#${c(l)}${c(d)}${c(u)}`},p=(e,t)=>d(((e,t)=>{let i=n(e);if(!i)throw Error(`Invalid hex color: ${e} for hexToRgba`);let[r,a,o]=i;return{r,g:a,b:o,a:Math.max(0,Math.min(1,t))}})(e,t))},78020(e,t,i){i.d(t,{A:()=>n});function n(e){let t=Math.round(e/1e3),i=Math.floor(t/60),n=t%60;return i+":"+(n<10?"0":"")+n}},210909(e,t,i){i.r(t),i.d(t,{default:()=>T});var n=i(61163),r=i(859471),a=i(19821),o=i(182267),s=i(586733),l=i(489630);function d(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c={},u=e=>{let t=e.__id||e.id;return"string"==typeof t&&t||null};class p{constructor(){d(this,"idMap",new Map),d(this,"objMap",new WeakMap)}get(e){let t=u(e);return this.objMap.get(e)??(t?this.idMap.get(t):void 0)}has(e){let t=u(e);return this.objMap.has(e)??(!!t&&this.idMap.has(t))}set(e,t){let i=u(e);i&&this.idMap.set(i,t),this.objMap.set(e,t)}reset(){this.idMap=new Map,this.objMap=new WeakMap}}function h(e,t){return"number"==typeof e?e:"lg1"===t?e[t]??e.lg??1:e[t]??1}var m=i(411805),_=i(11978),f=i(127413),g=i(131094),b=i(562615);let{css:x,animation:w}=f.A,A={backgroundColor:"var(--sema-color-background-secondary)",animation:w,borderRadius:"var(--sema-rounding-400)"};function v({data:e}){(0,r.useEffect)(()=>{(0,n.A)("SkeletonPin","/app/common/react/components/SkeletonLoadingStates/SkeletonPin.tsx")},[]);let{height:t}=e;return(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(g.A,{unsafeCSS:x}),(0,b.jsx)(a.az,{dangerouslySetInlineStyle:{__style:A},"data-test-id":"skeleton-pin",children:(0,b.jsx)(a.az,{height:t})})]})}var y=i(601185),S=i(844255),E=i(971289),P=i(81920),I=i(912849);function T(e){(0,r.useEffect)(()=>{(0,n.A)("Masonry","/app/packages/gestaltExtensions/Masonry/Masonry.tsx")},[]);let{align:t,cacheKey:i,id:d,isFetching:u,isGridCentered:f=!0,items:x,layout:w,loadItems:A,masonryRef:T,optOutFluidGridExperiment:C=!1,renderItem:R,scrollContainerRef:O,virtualize:j=!0,getColumnSpanConfig:M,_getResponsiveModuleConfigForSecondItem:N,isLoadingStateEnabled:k,initialLoadingStatePinCount:L,isLoadingAccessibilityLabel:z,isLoadedAccessibilityLabel:D}=e,H=(0,E.Ay)(),{isAuthenticated:U,isRTL:F,userAgent:V,stage:B}=(0,S._8)(),{browserName:W,platform:$}=V,{logContextEvent:G}=(0,s.o)(),Y=(0,y.A)(),K="desktop"===H,q=(0,I.AJ)(),J=((0,r.useRef)(x.map(()=>({fetchTimestamp:Date.now(),measureTimestamp:Date.now(),hasRendered:!1,pageCount:0}))),K&&!C),{experimentalColumnWidth:Q,experimentalGutter:X}=(0,m.A)(J),Z=e.serverRender??!!K,ee="flexible"===w||"uniformRowFlexible"===w||"desktop"!==H||J,et=(ee&&w?.startsWith("uniformRow")?"uniformRowFlexible":void 0)??(Z?"serverRenderedFlexible":"flexible"),ei=e.columnWidth??Q??236;ee&&(ei=Math.floor(ei));let en=e.gutterWidth??X??(K?16:1),er=e.minCols??2,ea=((0,r.useRef)(0),ei+en),eo=function(e){let t;if(null==e)return;let i=((t=c[e])&&t.screenWidth===window.innerWidth||(c[e]={screenWidth:window.innerWidth}),c[e]);return i.measurementCache||(i.measurementCache=new p),i.measurementCache}(i),es=(0,r.useCallback)(()=>O?.current||window,[O]),el=(0,r.useRef)(!0),{anyEnabled:ed}=Y.checkExperiment("visual_search_stl_eligibility_check_migration_gss_css",{dangerouslySkipActivation:!0}),{group:ec}=Y.checkExperiment("web_nav_sidebar",{dangerouslySkipActivation:!0}),eu=ec.startsWith("enabled_autoclose_reduce_debounce")?Number(ec.split("enabled_autoclose_reduce_debounce_")[1]):void 0,ep=f&&el.current?"centered":"",{className:eh,styles:em}=function(e){let t=`m_${Object.keys(e).sort().reduce((t,i)=>{let n=e[i];return null==n||"object"==typeof n||"function"==typeof n?t:"boolean"==typeof n?t+(n?"t":"f"):t+n},"").replace(/\:/g,"\\:")}`,{flexible:i,gutterWidth:n,isRTL:r,itemWidth:a,maxColumns:o,minColumns:s,items:l,getColumnSpanConfig:d,_getResponsiveModuleConfigForSecondItem:c}=e,u=d?l.map((e,t)=>({index:t,columnSpanConfig:d(e)??1})).filter(e=>1!==e.columnSpanConfig):[],p=a+n,m=Array.from({length:o+1-s},(e,t)=>t+s).map(e=>{let m,_,f=e===s?0:e*p,g=e===o?null:(e+1)*p-.01;d&&c&&l.length>1&&(m=d(l[0]),_=c(l[1]));let{styles:b,numberOfVisibleItems:x}=u.reduce((r,o)=>{let{columnSpanConfig:s}=o,d=Math.min(function({columnCount:e,columnSpanConfig:t,firstItemColumnSpanConfig:i,isFlexibleWidthItem:n,secondItemResponsiveModuleConfig:r}){let a=e<=2?"sm":e<=4?"md":e<=6?"lg1":e<=8?"lg":"xl",o=h(t,a);if(n){let t=h(i,a);o="number"==typeof r?r:r?Math.max(r.min,Math.min(r.max,e-t)):1}return o}({columnCount:e,columnSpanConfig:s,isFlexibleWidthItem:!!_&&o===l[1],firstItemColumnSpanConfig:m??1,secondItemResponsiveModuleConfig:_??1}),e),c=null!=o.index&&r.numberOfVisibleItems>=d+o.index,u=i?100/e*d:a*d+n*(d-1),{numberOfVisibleItems:p}=r;return c?p-=d-1:o.index<p&&(p+=1),{styles:r.styles.concat(function({className:e,index:t,columnSpanConfig:i,visible:n,width:r,flexible:a}){let o="number"==typeof i?i:btoa(JSON.stringify(i));return a?`
      .${e} .static[data-column-span="${o}"]:nth-child(${t+1}) {
        visibility: ${n?"visible":"hidden"} !important;
        position: ${n?"inherit":"absolute"} !important;
        width: ${r}% !important;
      }`:`
      .${e} .static[data-column-span="${o}"]:nth-child(${t+1}) {
        visibility: ${n?"visible":"hidden"} !important;
        position: ${n?"inherit":"absolute"} !important;
        width: ${r}px !important;
      }`}({className:t,index:o.index,columnSpanConfig:s,visible:c,width:u,flexible:i})),numberOfVisibleItems:p}},{styles:"",numberOfVisibleItems:e}),w=i?`
      .${t} .static {
        box-sizing: border-box;
        width: calc(100% / ${e}) !important;
      }
    `:`
      .${t} {
        max-width: ${e*p}px;
      }

      .${t} .static {
        width: ${a}px !important;
      }
    `;return{minWidth:f,maxWidth:g,styles:`
      .${t} .static:nth-child(-n+${x}) {
        position: static !important;
        visibility: visible !important;
        float: ${r?"right":"left"};
        display: block;
      }

      .${t} .static {
        padding: 0 ${n/2}px;
      }

      ${w}

      ${b}
    `}}),_=m.map(({minWidth:e,maxWidth:t,styles:i})=>`
    @container (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${i}
    }
  `),f=m.map(({minWidth:e,maxWidth:t,styles:i})=>`
    @media (min-width: ${e}px) ${t?`and (max-width: ${t}px)`:""} {
      ${i}
    }
  `),g=`
    ${_.join("")}
    @supports not (container-type: inline-size) {
      ${f.join("")}
    }
  `;return{className:t,styles:`
    .masonryContainer:has(.${t}) {
      container-type: inline-size;
    }

    .masonryContainer > .centered {
      margin-left: auto;
      margin-right: auto;
    }

    .${t} .static {
      position: absolute !important;
      visibility: hidden !important;
    }

    ${g}
  `}}({gutterWidth:en,flexible:ee,items:x,isRTL:F,itemWidth:ei,maxColumns:e.maxColumns??Math.max(x.length,16),minColumns:er,getColumnSpanConfig:M,_getResponsiveModuleConfigForSecondItem:N}),e_=`${ep} ${eh}`.trim(),{anyEnabled:ef,expName:eg,group:eb,isMeasureAllEnabled:ex}=(0,_.A)(),ew=((0,r.useRef)(void 0),(0,r.useRef)(x.length)),eA=(0,r.useRef)(0),ev=(0,r.useRef)(null);(0,r.useEffect)(()=>{ew.current=x.length,eA.current+=1},[x]),(0,r.useEffect)(()=>{el.current&&(el.current=!1)},[]),(0,r.useEffect)(()=>()=>{},[]);let ey=(0,r.useCallback)(e=>{let t=e.reduce((e,t)=>e+t),i=t/e.length,n={experimentalMasonryGroup:eb||"unknown",handlerId:q,isAuthenticated:U,multiColumnItemSpan:e.length,browserName:W,platform:$,stage:B||"unknown"};(0,P.GV)("webapp.masonry.multiColumnWhitespace.count",{sampleRate:1,tags:n}),(0,P.uI)("webapp.masonry.multiColumnWhitespace.average",i,{sampleRate:1,tags:{...n,minCols:er}}),G({event_type:15878,component:14468,aux_data:{total_whitespace_px:t}}),G({event_type:16062,component:14468,aux_data:{average_whitespace_px:i}}),G({event_type:16063,component:14468,aux_data:{max_whitespace_px:Math.max(...e)}}),e.forEach(e=>{e>=50&&((0,P.GV)("webapp.masonry.multiColumnWhitespace.over50",{sampleRate:1,tags:n}),G({event_type:16261,component:14468})),e>=100&&((0,P.GV)("webapp.masonry.multiColumnWhitespace.over100",{sampleRate:1,tags:n}),G({event_type:16262,component:14468}))})},[W,eb,q,U,G,er,$,B]),{_items:eS,_renderItem:eE}=function({initialLoadingStatePinCount:e=50,infiniteScrollPinCount:t=10,isFetching:i,items:n=[],renderItem:a,isLoadingStateEnabled:o}){let s=+(n.filter(e=>"object"==typeof e&&null!==e&&"type"in e&&"closeup_module"===e.type).length>0),l=o&&i,d=(0,r.useMemo)(()=>Array.from({length:n.length>s?t:e}).reduce((e,t,i)=>[...e,{height:i%2==0?356:236,key:`skeleton-pin-${i}`,isSkeleton:!0}],[]),[n.length,s,t,e]);return{_items:(0,r.useMemo)(()=>l?[...n,...d]:n,[l,n,d]),_renderItem:(0,r.useMemo)(()=>o?e=>{let{itemIdx:t,data:i}=e;return t>=n.length&&i&&"object"==typeof i&&"key"in i&&"height"in i?(0,b.jsx)(v,{data:i},i.key):a(e)}:a,[o,a,n.length])}}({isLoadingStateEnabled:k,items:x,renderItem:(0,r.useCallback)(e=>(0,b.jsx)(l.A,{name:"MasonryItem",children:R(e)}),[R]),isFetching:u,initialLoadingStatePinCount:L}),eP=k&&u,eI=(0,r.useRef)(new Set);(0,r.useEffect)(()=>{let e={isAuthenticated:U,isDesktop:"desktop"===H,handlerId:q,experimentalMasonryGroup:eb||"unknown",visualSearchSTLexperiment:ed?"true":"false",browserName:W,platform:$,stage:B||"unknown"},t=setTimeout(()=>{requestAnimationFrame(()=>{let t=Array.from(ev.current?.querySelectorAll("[data-grid-item-idx]")??[]);if(0===t.length)return;let i=t.map(e=>{let t=e.getAttribute("data-grid-item-idx");return{rect:e.getBoundingClientRect(),itemIdx:t}}),n=0,r=0,a=0,o=0,s=0,l=0;for(let e=0;e<i.length;e+=1){let t=i[e]?.rect,d=i[e]?.itemIdx;for(let c=e+1;c<i.length;c+=1){let e=i[c]?.rect,u=i[c]?.itemIdx;if(t&&e&&d&&u){let i=[d,u].sort().join("|");if(!eI.current.has(i)&&t.right>=e.left&&t.left<=e.right&&t.bottom>=e.top&&t.top<=e.bottom&&t.height>0&&e.height>0){eI.current.add(i),n+=1;let d=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));d>8e4?l+=1:d>4e4?s+=1:d>1e4?o+=1:d>5e3?a+=1:d>2500&&(r+=1)}}}}n>0&&(0,P.U9)("webapp.masonry.pinOverlapHits",n,{tags:e,sampleRate:.02}),r>0&&(0,P.U9)("webapp.masonry.pinOverlap.AreaPx.over2500",r,{tags:e,sampleRate:.02}),a>0&&(0,P.U9)("webapp.masonry.pinOverlap.AreaPx.over5000",a,{tags:e,sampleRate:.02}),o>0&&(0,P.U9)("webapp.masonry.pinOverlap.AreaPx.over10000",o,{tags:e,sampleRate:.02}),s>0&&(0,P.U9)("webapp.masonry.pinOverlap.AreaPx.over40000",s,{tags:e,sampleRate:.02}),l>0&&(0,P.U9)("webapp.masonry.pinOverlap.AreaPx.over80000",l,{tags:e,sampleRate:.02});let d="none";d=i.length<=10?"0-10":i.length<=20?"11-20":">20";let c="none";c=n>0&&n<=5?"1-5":n>5&&n<=20?"6-20":n>20&&n<=100?"21-100":">100",(0,P.GV)("webapp.masonry.pinOverlap.onOverlapCalculation",{tags:{...e,hasAnyOverlap:n>0?"true":"false",hasOverlapAreaOver2500:r>0?"true":"false",hasOverlapAreaOver5000:a>0?"true":"false",hasOverlapAreaOver10000:o>0?"true":"false",hasOverlapAreaOver40000:s>0?"true":"false",hasOverlapAreaOver80000:l>0?"true":"false",itemsMeasured:d,overlapPairs:c},sampleRate:.02})})},1e3);return()=>{clearTimeout(t)}},[W,H,eb,U,q,$,B,ed]);let eT=(0,o.A)(),eC=(0,r.useCallback)(e=>{T&&(T.current=e)},[T]);return(0,b.jsxs)(r.Fragment,{children:[k&&!el.current&&(0,b.jsx)(a.az,{"aria-live":"polite",display:"visuallyHidden",children:eP?z:D}),(0,b.jsx)("div",{ref:ev,"aria-busy":k?!!eP:void 0,className:"masonryContainer","data-test-id":"masonry-container",id:d,style:J?{padding:`0 ${en/2}px`}:void 0,children:(0,b.jsxs)("div",{className:e_,children:[Z&&el.current?(0,b.jsx)(g.A,{"data-test-id":"masonry-ssr-styles",unsafeCSS:em}):null,(0,b.jsx)(a.az,{"data-test-id":"max-width-container",marginBottom:0,marginEnd:"auto",marginStart:"auto",marginTop:0,maxWidth:e.maxColumns?ea*e.maxColumns:void 0,children:ef?(0,b.jsx)(a._6,{ref:eT?eC:e=>{T&&(T.current=e)},_dynamicHeights:!0,_getResponsiveModuleConfigForSecondItem:N,_logTwoColWhitespace:ey,_measureAll:ex,align:t,columnWidth:ei,getColumnSpanConfig:M,gutterWidth:en,items:eS,layout:ee?et:w??"basic",loadItems:A,measurementStore:eo,minCols:er,renderItem:eE,scrollContainer:es,virtualBufferFactor:.3,virtualize:j}):(0,b.jsx)(a.a,{ref:eT?eC:e=>{T&&(T.current=e)},_dynamicHeights:!0,_experimentalFluidResizeDebounce:void 0!==eu&&eu>=0?eu:void 0,_fluidResize:!0,_getResponsiveModuleConfigForSecondItem:N,_logTwoColWhitespace:ey,align:t,columnWidth:ei,getColumnSpanConfig:M,gutterWidth:en,items:eS,layout:ee?et:w??"basic",loadItems:A,measurementStore:eo,minCols:er,renderItem:eE,scrollContainer:es,virtualBufferFactor:.3,virtualize:j})})]})})]})}},411805(e,t,i){i.d(t,{A:()=>n});function n(e=!0){let t=e?16:void 0,i=t?Math.floor(t/4):void 0;return{experimentalColumnWidth:e?221:void 0,experimentalGutter:t,experimentalGutterBoints:i}}},715989(e,t,i){i.d(t,{A:()=>r});var n=i(844255);let r=()=>{let e="default",{locale:t}=(0,n._8)();return(({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[t]??e)===e?"compact":"none"}},766675(e,t,i){i.d(t,{A:()=>o});var n=i(859471);function r(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends n.Component{constructor(...e){super(...e),r(this,"ref",(0,n.createRef)()),r(this,"observer",null),r(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let o=a},275272(e,t,i){i.d(t,{A:()=>h});var n=i(61163),r=i(859471),a=i(19821),o=i(659182),s=i(201593),l=i(123576);let d="0px 0px 8px rgba(0, 0, 0, 0.1)";var c=i(844255),u=i(535494),p=i(562615);function h({children:e,footerConfig:t,headerConfig:i,height:h,hideOnScroll:m,hideOnScrollState:{isHidden:_,updateHiddenState:f},isFooterHidden:g,noPadding:b,paddingX:x,paddingY:w=3,type:A,zIndex:v,isStoryPin:y}){let S,E;(0,r.useEffect)(()=>{(0,n.A)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:P,ignoreObstructions:I,zIndexForGestaltBug:T}=i||{},{appUpsellFooterConfig:C,footerInLego:R,navFooterConfig:O}=t||{},j=!!C,M="header"===A?"top":"bottom",{isDarkMode:N}=(0,s.D2)(),{isRTL:k}=(0,c._8)(),{mWebCloseupRedesignEnabled:L}=(0,o.A)(),z=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{try{if(!I){let e=z.current;D.current=P&&e&&Array.isArray(e.children)?e.children[0]:e,D.current instanceof HTMLElement&&l.A.addObstruction(M,D.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!I&&D.current instanceof HTMLElement&&l.A.removeObstruction(M,D.current)}},[I,P,M,N]);let H="top"===M?"relative":"fixed",U=b?0:w,F=(h??64)+(i?.overrideTop||0),V=m||O?{transition:R||L?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",..._||g?{transform:`translateY(${"top"===M?-F:F}px)`,opacity:R||L?0:1}:Object.freeze({})}:{},B=2*!("relative"!==H||i?.noGutter),W=B?-B:0,$=N?s.ee:"rgba(255,255,255,.95)";N&&("header"===A?S=-1:E=-1);let G=R?j?void 0:h??64:"100%",Y=i?.isTranslucent&&$||N?$:"var(--sema-color-background-default)",K=i?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":Y,q=(0,r.useMemo)(()=>({height:"footer"===A&&L?`calc(${G} + env(safe-area-inset-bottom))`:G,...L&&"footer"===A?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(U||0)}px)`}:Object.freeze({})}),[L,G,A,U]),J=(0,u.A)({skipExpActivation:!0});return(0,p.jsx)(a.az,{ref:z,bottom:"footer"===A,dangerouslySetInlineStyle:{__style:{top:S,bottomStyle:E,...!v||T?{zIndex:T||1}:Object.freeze({}),...P?{background:"transparent",overflow:"hidden",paddingBottom:100,marginBottom:-100,pointerEvents:"none"}:Object.freeze({}),...i?.hasBorder?{borderBottom:"1px solid #efefef"}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...V}},"data-test-id":A,display:j?"flex":void 0,height:h&&!R?h:void 0,left:!0,marginEnd:R?"auto":W,marginStart:R?"auto":W,onTransitionEnd:()=>{(m||O)&&D.current&&(_||g?l.A.removeObstruction(M,D.current):l.A.addObstruction(M,D.current))},position:H,right:!0,top:"header"===A,width:R||"fixed"!==H?void 0:"100%",zIndex:T?void 0:v,children:(0,p.jsx)(a.az,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:K,paddingLeft:k||!J||y?void 0:"8px",paddingRight:k&&J&&!y?"8px":void 0,...q,boxShadow:L&&"footer"===A?`0 10px 0 0 ${K}, ${d}`:R?d:void 0,marginBottom:R&&!O?.docked?16:void 0,...P?{pointerEvents:"auto"}:Object.freeze({}),...i?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:R||t?.alignCenter?"flex":void 0,marginEnd:R?"auto":void 0,marginStart:R?"auto":void 0,paddingX:x||4*("footer"===A&&!b)+B,paddingY:U,position:"relative",rounding:R&&!O?.docked?"pill":void 0,width:O?O.footerWidth:j?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:f}):e})})}},303196(e,t,i){i.r(t),i.d(t,{default:()=>d});var n=i(61163),r=i(859471),a=i(19821),o=i(275272),s=i(292225),l=i(562615);function d({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:i,isTranslucent:d,isTransparentBackground:c,noGutter:u,overrideTop:p,useRoundedCorners:h,zIndexForGestaltBug:m,isStoryPin:_,...f}){(0,r.useEffect)(()=>{(0,n.A)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:g,paddingY:b=3,zIndex:x}=f;return(0,l.jsx)(a.ib,{height:t?44+2*(g?0:b)*4:void 0,top:p||0,zIndex:x||void 0,children:(0,l.jsx)(s.A,{hideOnScroll:f.hideOnScroll,children:n=>(0,l.jsx)(o.A,{...f,headerConfig:{isTranslucent:d,isTransparentBackground:c,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:i,noGutter:u,overrideTop:p,zIndexForGestaltBug:m,useRoundedCorners:h},hideOnScrollState:n,isStoryPin:_,type:"header"})})})}},292225(e,t,i){i.d(t,{A:()=>o});var n=i(859471),r=i(284966);function a(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends n.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,r.A)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state,n=window.scrollY,r=n-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=r<0?n<=Math.abs((window.scrollMinY||0)+Math.max(r,20))?"start":"none":n>=(window.scrollMaxY||o-s)-Math.max(r,20)?"end":"none");let l=55*!t?.isModal;e?r>20&&i&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20&&!i||n<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!i||n<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>l||"end"===a)&&i&&(this.updateHiddenState(!1),t?.onScroll(!1)):(r<-20||"start"===a)&&i||n<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(r>20||"end"===a)&&!i&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:i}=this.state;return e({isHidden:!t?.forceShow&&i,updateHiddenState:this.updateHiddenState})}}},675201(e,t,i){i.d(t,{A:()=>a});var n=i(479123);let r=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/camera-sam-segmentation","/careers","/categories","/close-account","/collage-creation-tool","/color-seasons","/compare","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/image-proxy.html","/inbox","/install-shuffles","/invited","/jobs","/lens-sam-segmentation","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/example-tentpole-campaign-predicts2026","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-ad-data","/request-data","/robots.txt","/safe-redirect","/search","/session_key","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-lens-image-history","/upload-lens-image","/upload-profile-image","/upload-shuffle-draft","/upload-shuffle-image","/verified","/verify","/videos","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function a(e){return!!(0,n.B6)({path:"/:username/",end:!0},e.pathname)&&!r.includes(e.pathname.replace(/\/$/,""))}},805170(e,t,i){i.d(t,{RQ:()=>r,zD:()=>n});let n={PUSH:"push",EMAIL:"email",NEWS:"news",WEB_PUSH:"web_push"},r=new Set([203])},131321(e,t,i){i.d(t,{A:()=>n});function n(e,t){return t in e}},164221(e,t,i){i.d(t,{A:()=>l,p:()=>s});var n=i(61163),r=i(859471),a=i(19821),o=i(562615);let s=({fill:e})=>{(0,r.useEffect)(()=>{(0,n.A)("RatingStars","/app/packages/recipe-star-components/RatingStars.tsx")},[]);let t="half"===e?(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(a.az,{position:"absolute",children:(0,o.jsx)(a.In,{accessibilityLabel:"","aria-hidden":!0,color:"default",icon:"star-half-fill",size:15})}),(0,o.jsx)(a.In,{accessibilityLabel:"",color:"subtle",icon:"star-fill",size:15})]}):(0,o.jsx)(a.In,{accessibilityLabel:"","aria-hidden":!0,color:"full"===e?"default":"subtle",icon:"star-fill",size:15});return(0,o.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:t})};function l({max_rating:e,rating:t,display:i}){var l;if((0,r.useEffect)(()=>{(0,n.A)("RatingStars","/app/packages/recipe-star-components/RatingStars.tsx")},[]),!t)return null;let d=[],c=parseFloat(e||"5"),u=5*(l=(l=parseFloat(t)||0)<=c?l:c)/c;if(Number.isNaN(u))return null;let p=Math.floor(u),h=u-p;return[...Array(p).keys()].forEach(e=>d.push((0,o.jsx)(s,{fill:"full"},e))),h>=.75?d.push((0,o.jsx)(s,{fill:"full"},d.length)):h>=.25&&d.push((0,o.jsx)(s,{fill:"half"},d.length)),[...Array(5-d.length).keys()].forEach(()=>d.push((0,o.jsx)(s,{fill:"empty"},d.length))),(0,o.jsx)(a.az,{"aria-label":`Rating ${String(u)} stars out of 5`,"data-test-id":"rating-stars",display:i?"flex":"inlineBlock",position:"relative",role:"img",width:18*c,children:d})}},805863(e,t,i){i.d(t,{A:()=>a});var n=i(457315),r=i(752159);function a(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,r.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,r.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,r.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,r.fu)("mweb_service_worker.unregister_fail",{error:(0,n.A)(e,"message")})})})):Promise.resolve()}},319571(e,t,i){i.d(t,{A:()=>b});var n=i(61163),r=i(859471),a=i(19821),o=i(662449),s=i(766675),l=i(844255),d=i(274638),c=i(284300),u=i(697294),p=i(809799),h=i(699613),m=i(562615);function _(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends r.Component{constructor(e){super(e),_(this,"componentWillUnmount",()=>{this.unregisterComponent()}),_(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:i,objectId:n,timeSpentContext:r,view:a,viewParameter:o}=this.props;return{view:a||r?.view,viewParameter:o||r?.viewParameter,component:t||r?.component,element:i,objectId:n||r?.objectId,clientTrackingParams:e||r?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),_(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),_(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e?.getParentUuid?.()}),_(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),_(this,"getTimedPair",()=>this.state.timedPair),_(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),_(this,"isRegistered",!1),_(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),_(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),_(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:i,left:n,right:r,top:a}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===i&&0===n&&0===r&&0===a?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new u.A(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,d.A)(e.auxData,this.props.auxData)&&(0,d.A)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverBoxHeight:t}=this.props;return(0,m.jsx)(p.I,{value:this.getContext(),children:(0,m.jsx)(s.A,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:i=>(0,m.jsx)(a.az,{ref:i,height:t??"100%",children:r.Children.only(e)})})})}componentDidMount(){(0,n.A)("DeprecatedTimeSpent","/app/packages/time-spent/DeprecatedTimeSpent.tsx")}}function g(e){let t=(0,o.qD)(),i=(0,p.J)(),n=(0,c.A)(),a=(0,h.Vk)(),{requestIdentifier:s=""}=(0,l._8)(),d={app_instance_id:s.slice(0,8),...e.auxData??{}};return(0,r.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,r.useEffect)(()=>{n?.setPins(a??{})},[a,n]),n?(0,m.jsx)(f,{...e,auxData:d,timeSpentContext:i,timeSpentManager:n,children:e.children}):e.children}g.displayName="DeprecatedTimeSpent";let b=g},809799(e,t,i){i.d(t,{I:()=>n,J:()=>r});let{Provider:n,getMaybe:r}=(0,i(987628).A)("timeSpentContext")},284300(e,t,i){i.d(t,{A:()=>a,q:()=>n});let{Provider:n,getMaybe:r}=(0,i(987628).A)("TimeSpentManagerContext"),a=r},894986(e,t,i){i.d(t,{A:()=>r});var n=i(307079);let r=({url:e})=>{if(e){let t=e.split("?");if(t[1])return(0,n.A)(t[1])}return(0,n.A)()}},17964(e,t,i){i.d(t,{K:()=>f,C:()=>g});var n=i(859471),r=i(987628),a=i(693154),o=i(430705),s=i(39165),l=i(401691),d=i(484409),c=i(307424);let u=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,c.A)(i)]=e[i]:t[(0,c.A)(i)]=u(e[i]));return t},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var m=i(562615);let{Provider:_,getMaybe:f}=(0,r.A)("RoleBasedAccessControlContext"),g=({children:e})=>{let t=(0,a.A)(),i=!!(t.isAuth&&t.isPartner),{state:r,actions:c,receiveProfiles:f}=(e=>{let[t,i]=(0,n.useReducer)(h,p),r=(({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:r,disableProfileChanger:a,headerVisible:o}=i,s=(0,n.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]);return{changeProfile:s,toggleORBACVisibility:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!r})},[t,e,r]),toggleDisableProfileChanger:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!a})},[t,e,a]),toggleHeaderVisibility:(0,n.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!o})},[t,e,o])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:o}=t;return(0,n.useEffect)(()=>{let e=(0,d.V2)().getItem(l.b6)||!1;e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,n.useEffect)(()=>{let e=(0,d.V2)().getItem(l.t5)||!1;e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,n.useEffect)(()=>{(0,d.V2)().setItem(l.t5,o)},[o]),(0,n.useEffect)(()=>{(0,d.V2)().setItem(l.b6,a)},[a]),{state:t,actions:r,receiveProfiles:(0,n.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:((e,t)=>{let i=[];for(let n in e)n!==t&&i.push({id:n,...u(e[n])});let n=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),r=new Map;for(let e of n)r.set(e.id,e);return r})(e,t)})},[i])}})(i),{activeProfile:g,headerVisible:b,profiles:x}=r,w=(0,n.useMemo)(()=>x?Array.from(x.values()):[],[x]),A=(0,s.A)(w),v=!!t.isAuth&&w.length>0&&A,y=t.isAuth?t.id:"",S=t.isAuth?t.username:"",{changeProfile:E,toggleORBACVisibility:P,toggleDisableProfileChanger:I,toggleHeaderVisibility:T}=c;(0,n.useEffect)(()=>{!i||("string"==typeof A?E(A):g||E(y))},[A,y,i,E,g]),(0,n.useEffect)(()=>{i&&(v&&!b&&T(!0),!v&&b&&T(!1))},[T,v,i,b,x]);let{data:C}=(0,o.A)(i?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),R=C?.profiles,O=(0,n.useMemo)(()=>t&&t.isAuth&&g===t.id?{id:t.id,permissions:["OWNER"],user:{username:S,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:g&&x?x.get(g):void 0,[g,x,t,S]);(0,n.useEffect)(()=>{R&&f(R,y)},[f,R,y]);let j=(0,n.useMemo)(()=>({profiles:w,headerVisible:b,activeProfile:O,changeProfile:E,toggleORBACVisibility:P,toggleDisableProfileChanger:I,toggleHeaderVisibility:T}),[w,b,O,E,P,I,T]);return(0,m.jsx)(_,{value:j,children:e})}},870540(e,t,i){i.d(t,{A:()=>l});var n=i(859471),r=i(601185),a=i(17964),o=i(39165);let s=Object.freeze({}),l=()=>{let{checkExperiment:e}=(0,r.A)(),t=(0,a.K)(),{activeProfile:i}=t||{},l=(0,o.A)(t?.profiles||[]),{anyEnabled:d}=e("useorbacroutematcher_in_useorbacactingas");return(0,n.useMemo)(()=>d&&!l?s:i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:s,[d,l,i])}},39165(e,t,i){i.d(t,{A:()=>s});var n=i(979638),r=i(693154),a=i(115795),o=i(699613);let s=e=>{let t=(0,n.zy)(),i=(0,r.A)(),s=(0,o.HR)(),l=(0,n.RQ)("/:username"),d=(0,n.RQ)("/:username/*"),c=(l||d)?.params?.username,u=(0,n.RQ)("/pin/:id"),p=(0,n.RQ)("/pin/:id/*"),h=u||p,m=!!h?.params?.id&&s(h.params.id)?.pinner?.id;if((0,a.vo)(t))return!1;if((0,a.Ir)(t)||(0,a.VX)(t))return!0;let _=[...e,...i.isAuth?[{user:{username:i.username},id:i.id}]:[]].find(e=>{if(!e)return!1;let{user:t,id:i}=e;return(!!t&&"username"in t&&!!t.username&&!!c||!!m&&!!i)&&(t.username===c||m===i)});return!!_&&_.id}},847753(e,t,i){i.d(t,{D9:()=>p,EL:()=>o,EQ:()=>l,H7:()=>s,Hs:()=>c,Nn:()=>u,Qp:()=>a,TO:()=>r,if:()=>h,uF:()=>n,wf:()=>d});let n=(e,t)=>{let i=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(i=t.user.businessName),i},r=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},a=(e,t)=>{let i=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(i=t.user.imgUrl),i},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,d=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),u=(e,t,i)=>!!(c(e,t,i)||e&&e.isAuth&&t===e.id),p=(e,t,i)=>u(e,t&&t.owner&&t.owner.id||"",i);function h(e,t,i){return u(e,t?t.id:"",i)}},466245(e,t,i){i.d(t,{A:()=>T});var n,r=i(61163),a=i(859471);i(825193);var o=i(19821),s=i(743372),l=i(693154),d=i(535273),c=i(538329),u=i(601185),p=i(575851),h=i(752159),m=i(67765),_=i(706466),f=i(476084),g=i(420818),b=i(971289),x=i(168079),w=i(143455),A=i(226150),v=i(871481),y=i(703674),S=i(769129),E=i(562615);let P=({children:e,pulsar:t,testId:i})=>t.show?(0,E.jsx)(o.az,{"data-test-id":i,position:"relative",children:(0,E.jsxs)(o.Rp,{onTap:t.onClick,tapStyle:"none",children:[(0,E.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},marginTop:-5,position:"absolute",children:e}),(0,E.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},marginTop:-12,position:"absolute",children:(0,E.jsx)(o.EV,{})})]})}):(0,E.jsx)(o.az,{"data-test-id":i,children:e}),I=(void 0!==n||(n=i(731360)).hash&&"cabaa35ed7d59dee006897bf3ef32e3d"!==n.hash&&console.error("The definition of 'FollowButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function T({auxData:e,disabled:t,disableLog:i,followEventType:n,id:T,inline:C,invertColors:R,isFollowed:O,isIdeaPin:j,isLegoEnabled:M,isSecondaryButton:N,isUserFollowButton:k,isUserMe:L,onFollow:z,onUnfollow:D,pinKey:H,shouldUseLegoColors:U,showPulsar:F,size:V,textType:B="FollowFollowing",unfollowEventType:W,viewParameter:$,viewType:G,clientTrackingParams:Y}){let K;(0,a.useEffect)(()=>{(0,r.A)("FollowButton","/app/www/FollowButton.tsx")},[]);let q=(0,c.A)(),J=(0,b.qJ)(),{showToast:Q}=(0,_.CG)(),X=(0,m.A)(),Z=(0,s.A)(),ee=(0,p.A)(),{checkExperiment:et}=(0,u.A)(),ei=(0,A.A)(),en=(0,l.A)(),er=en&&en.isAuth,{unauthFollowUserId:ea,setUnauthFollowUserId:eo}=(0,S.H)(),es=(0,v.DF)()(T),el=(0,f.A)(),[ed,ec]=(0,a.useState)(O),eu=es&&{imageMediumUrl:es.image_medium_url,username:es.username},ep=(0,d.A)(I,H),eh=ep?.linkDomain,em=ep?.nativeCreator,e_=ep?.originPinner,ef=ep?.pinner;K=em||(eh?eh.officialUser:e_||ef);let eg=eu??K;(0,x.A)(()=>{!J&&er&&ea&&T&&ea===T&&z(T)});let eb=ei({fn:()=>{if(er)ed?(D(T),ec(!1),i||Z({event_type:W,view_type:G,view_parameter:$,object_id_str:T,aux_data:e,clientTrackingParams:Y})):(z(T),ec(!0),k&&Q(({hideToast:e})=>{let t=eg?.username?`/${eg.username}/`:"";return(0,E.jsx)(y.A,{handleHide:e,href:t,imageUrl:eg?.imageMediumUrl||"",text:(0,E.jsx)(o.KJ,{lineClamp:4,children:q.bt("Following! Their created Pins will show up in your home feed!", "Following! Their created Pins will show up in your home feed!", "followButton.follow.informationalToastText", undefined, true)}),userId:T})}),i||Z({event_type:n,view_type:G,view_parameter:$,object_id_str:T,aux_data:e,clientTrackingParams:Y}));else{if((0,h.uq)(ed?"press_profile_unfollow":"press_profile_follow"),X({action:"click",item:ed?"unfollow-button":"follow-button"}),et("migration_upsell_manager_redux").anyEnabled||et("migration_upsell_manager_redux_dweb").anyEnabled||et("migration_upsell_manager_redux_mweb").anyEnabled||et("migration_upsell_manager_redux_dweb_global").anyEnabled||et("migration_upsell_manager_redux_mweb_global").anyEnabled)if(J){let e=et("pcons_dweb_contextual_follow_modal").anyEnabled;el((0,g.Vl)(!!j,e))}else{let e=et("pcons_mweb_contextual_follow_modal").anyEnabled;el((0,g.Ll)(!!j,e))}else ee({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:j?"click_idea_pin_follow":"click_follow",desktopOptions:{modalType:"signup",modalOptions:J&&et("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!J&&et("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0});J||eo(T??""),(0,h.uq)("clickthrough")}},modalHeader:(0,w.Bh)({i18n:q,toFollow:!ed})}),ex=!ed&&!!F,ew=()=>{if(L)return q.bt("That's you!", "That's you!", "Follow button is disabled because this is you", undefined, true);if("AddRemove"===B)return ed?q.bt("Remove", "Remove", "unfollowButton.removeText", undefined, true):q.bt("Add", "Add", "followButton.addText", undefined, true);let e="FollowUnfollow"===B?q.bt("Unfollow", "Unfollow", "unfollowButton.unfollowText", undefined, true):q.bt("Following", "Following", "Follow button label - followed state", undefined, true);return ed?e:q.bt("Follow", "Follow", "Follow button label - unfollowed state", undefined, true)};return(0,E.jsx)(P,{pulsar:ex?{show:!0,onClick:eb}:{show:!1},testId:L||ed?"board-unfollow-button":"board-follow-button",children:(0,E.jsx)(o.$n,{accessibilityLabel:ew(),color:U||"AddRemove"===B||!M&&N||R?"secondary":"primary",disabled:L||t,fullWidth:C,onClick:ex?void 0:({event:t})=>{t.preventDefault(),t.stopPropagation(),i||Z({event_type:101,component:13672,element:11951,object_id_str:T,view_type:G,view_parameter:$,aux_data:e,clientTrackingParams:Y}),eb()},selected:ed||!1,size:V,text:ew()})})}},878913(e,t,i){i.d(t,{P:()=>n,y:()=>r});let{Provider:n,getMaybe:r}=(0,i(987628).A)("PinCreateDeleteContext")},56157(e,t,i){i.d(t,{A:()=>h,_:()=>p});var n=i(61163),r=i(859471),a=i(19821),o=i(103892),s=i(715989),l=i(538329),d=i(542975),c=i(601185),u=i(562615);let p=[0,2,3];function h({hasAffiliateProducts:e,hasAffiliateLink:t,href:i,isPromoted:h,onNavigateSponsorClick:m,sponsorName:_,sponsorUsername:f,sponsorshipStatus:g,textWeight:b="bold",isGrid:x,affiliateDisclosure:w}){let A;(0,r.useEffect)(()=>{(0,n.A)("SponsorshipText","/app/www/SponsorshipText/SponsorshipText.tsx")},[]);let v=(0,l.A)(),{checkExperiment:y}=(0,c.A)(),S=y("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,E=(0,s.A)(),{inAffiliateDisclosureEnabled:P}=(0,o.A)(),I=i||(f?`/${f}/`:null),T=I&&_?(0,u.jsx)(a.KJ,{__dangerouslyOverrideLineHeight:E,size:"200",weight:b,children:(0,u.jsx)(a.N_,{dataTestId:"sponsorship-text-link",href:I,onClick:m,children:_})},_):void 0,C=S&&!h&&"Ad â€¢ "||"";return h?A=(0,d.vQ)(v.bt("Promoted by {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:T}):g||0===g?_&&!p.includes(g)?A=(0,d.vQ)(v.bt("Paid partnership with {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:T}):2!==g&&(A=v.bt("Paid partnership", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):!x&&(t||e)&&(A=P?w:v.bt("Paid link", "Paid link", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true),C=""),(0,u.jsxs)(a.KJ,{__dangerouslyOverrideLineHeight:E,color:"subtle",inline:!0,lineClamp:2,size:"200",children:[C,A]})}},769129(e,t,i){i.d(t,{H:()=>s,_:()=>l});var n=i(859471),r=i(987628),a=i(562615);let{Provider:o,get:s}=(0,r.A)("Session");function l({children:e}){let[t,i]=(0,n.useState)(void 0),r=(0,n.useCallback)(()=>i(void 0),[]),s=(0,n.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:i,removeUnauthFollowUserId:r}),[t,r]);return(0,a.jsx)(o,{value:s,children:e})}},678358(e,t,i){i.d(t,{_G:()=>c,oh:()=>d});var n=i(61163),r=i(859471),a=i(162497),o=i(562615);let s={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:a.qr,maxWidth:a.QH,descriptionPaneWidth:a.QH-a.qr,isCommentAttachmentSelectorOpen:!1,isCommentComposerFocused:!1,isCommentPopoverInteractionActive:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,calculatedImageHeight:0,setAbortNoActionPlacementTimeout:()=>{},setIsCloseupMediaViewerOpen:()=>{},setIsCommentAttachmentSelectorOpen:()=>{},setIsCommentComposerFocused:()=>{},setIsCommentPopoverInteractionActive:()=>{},setIsMediaViewerOpen:()=>{},setIsShoppingModuleExpanded:()=>{},setCalculatedImageHeight:()=>{},setViewportSize:()=>{}},l=(0,r.createContext)(s);function d({children:e,value:t}){(0,r.useEffect)(()=>{(0,n.A)("Context","/app/www/closeup/desktop/Context.tsx")},[]);let i=(0,r.useMemo)(()=>({...s,...t}),[t]);return(0,o.jsx)(l,{value:i,children:e})}function c(){let e=(0,r.use)(l);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}},162497(e,t,i){i.d(t,{DG:()=>s,Em:()=>b,En:()=>w,Ii:()=>v,M1:()=>p,MI:()=>g,QH:()=>a,Ye:()=>c,Z:()=>h,bZ:()=>m,bo:()=>o,gr:()=>A,h3:()=>d,n0:()=>u,nb:()=>_,qr:()=>r,t4:()=>y,tb:()=>l,vg:()=>f,w$:()=>x});var n=i(19821);let r=508,a=1016,o=488,s=992,l=672,d=1176,c=40,u=72,p=740,h=32,m=16,_=24,f=2,g=1,b=new n.rk(5),x={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"},w={boxShadow:"0 2px 5px rgba(0, 0, 0, 0.06)",transition:"box-shadow 200ms ease-in-out"},A="calc(90vh - 80px)",v="calc(55vh + 80px)",y="calc(75vh - 80px)"},48180(e,t,i){i.d(t,{A:()=>n});function n(e,t){e&&e.includes("~0")&&(e=e.replace("~0",""));let i=t?.includes("~0")?t:`${t||""}~0`;return e&&e.replace("undefined","")?e:i.replace("undefined","")}},143455(e,t,i){i.d(t,{Bh:()=>a,i:()=>r,wC:()=>n});let n=e=>e.bt("Log in to continue", "Log in to continue", "limitedLogin.modalHeader.default", undefined, true),r=e=>e.bt("You're almost there! Log in to access all of Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),a=({i18n:e,toFollow:t})=>t?e.bt("Log in to follow", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt("Log in to unfollow", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true)},226150(e,t,i){i.d(t,{A:()=>s});var n=i(538329),r=i(971289),a=i(168620),o=i(143455);let s=()=>{let e=(0,n.A)(),t=(0,r.qJ)(),{viewer:i,loginForMore:s,limitedLoginModalSubheader:l,limitedLoginModalNextLocation:d}=(0,a.x)();return"LIMITED_LOGIN"===i.type?({modalHeader:i,nextLocation:n})=>r=>{let a=null;r&&(r.nativeEvent&&r.nativeEvent instanceof Event?a=r:r.event&&(a=r.event)),a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()),s?.setVisible(!0),l?.setText(i||(t?(0,o.i)(e):(0,o.wC)(e))),n&&d?.setRoute(n)}:({fn:e})=>e}},57454(e,t,i){i.d(t,{A:()=>eY});var n=i(61163),r=i(859471),a=i(106386),o=i(979638),s=i(19821),l=i(706114),d=i(458345),c=i(668014),u=i(296221),p=i(358203),h=i(586733),m=i(671996),_=i(678863),f=i(845126),g=i(642883),b=i(201593);let x={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},w={full:"100vh",default:"50vh",auto:""},A=({size:e,isDarkMode:t})=>(x.height=w[e],x.maxHeight="auto"===e?"90vh":"100vw",x.backgroundColor=t?b.be:"#FFFFFF",x);var v=i(995273),y=i(538329),S=i(911127),E=i(826258),P=i(562615);let I=({content:e,footer:t,header:i})=>{let[n,a]=(0,r.useState)(!1),o=(0,r.useRef)(null),l=(0,r.useCallback)(()=>{let e=o.current;e&&a(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,r.useEffect)(()=>{l()},[l]),(0,r.useEffect)(()=>(window?.addEventListener("resize",l),()=>{window?.removeEventListener("resize",l)}),[l]),(0,P.jsxs)(r.Fragment,{children:[(0,P.jsxs)(s.az,{ref:o,fit:!0,onScroll:l,overflow:"scroll",padding:0,children:[i,(0,P.jsx)(s.az,{flex:"grow",overflow:"auto",children:e})]}),!!t&&(0,P.jsx)(s.az,{dangerouslySetInlineStyle:n?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:t})]})};function T({accessibilityModalLabel:e,allowClickAndDrag:t,allowBackgroundScroll:i=!1,children:a,closeOnOutsideClick:o=!0,footer:l,header:d,isOpen:c,mobileIsSlideUp:u,onDismiss:p,zIndex:h,size:m="auto"}){(0,r.useEffect)(()=>{(0,n.A)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let _=(0,y.A)(),f=(0,r.useRef)(null),{setAppFocusState:x}=(0,E.Y)(),[T,C]=(0,r.useState)(!1),{isDarkMode:R}=(0,b.D2)();if((0,r.useEffect)(()=>(c?x(!1):x(!0),()=>{c&&x(!0)}),[x,c]),(0,r.useEffect)(()=>(f.current=(0,g.A)(()=>{f.current&&C(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&f.current&&(window.cancelAnimationFrame(f.current),f.current=null)}),[]),(0,r.useEffect)(()=>{let e=c&&!i;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[c,i]),!c)return null;let O=(({isDarkMode:e,size:t})=>{let i=e?b.be:"#FFFFFF";return{__style:{...A({size:t,isDarkMode:e}),backgroundColor:i,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:R,size:m});O.__style.transform=(()=>{if(u||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),t=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||t<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let j=(({size:e,isShowing:t,isDarkMode:i})=>{let n=A({size:e,isDarkMode:i});return n.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",n.transform=t?"translateY(0)":`translateY(${w[e]||"100vh"})`,{__style:n}})({size:m,isShowing:T,isDarkMode:R});return(0,P.jsx)(S.A,{allowClickAndDrag:t,children:(0,P.jsx)(s.Wd,{children:(0,P.jsxs)(s.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:h||v.QN,children:[(0,P.jsx)(s.Rp,{accessibilityLabel:_.bt("Mobile sheet mask", "Mobile Sheet Mask", "mweb.sheet_mobile.mask", undefined, true),onTap:()=>{o&&p()},tapStyle:"none",children:(0,P.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1)})}),(0,P.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:u?j:O,position:"fixed",children:(0,P.jsx)(s.az,{direction:"column",display:"flex",justifyContent:"between",maxHeight:j.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,P.jsx)(I,{content:a,footer:l,header:d})})})]})})})}var C=i(81920);let R=({display_data:e,complete:t,dismiss:i,context_aux_data:n})=>{let a=(0,y.A)(),{logContextEvent:o}=(0,h.o)(),[l,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(0),p=()=>{d(!1),i()},g=(0,r.useCallback)((e,t)=>{o({event_type:e,component:15489,element:t,aux_data:{experience_id:n.experience_id,placement_id:n.placement_id,step_number:c+1,step_index:c}})},[n.experience_id,n.placement_id,c,o]);if((0,r.useEffect)(()=>{g(13,18257)},[c,g]),!l)return null;if(!(e.steps&&e.steps.length>0&&e.steps.every(e=>e.title&&e.subtitle&&e.primary_button&&e.image)))return(0,C.GV)(m.pv,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:"Required display data not present",platform:4}}),null;let b=e.steps[c];if(!b)return(0,C.GV)(m.pv,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:`No step for index ${c}`,platform:4}}),null;let x=window?.innerWidth||375,w=(0,P.jsxs)(r.Fragment,{children:[(0,P.jsx)(s.ib,{top:0,children:(0,P.jsx)(s.az,{padding:3,position:"absolute",width:"100%",children:(0,P.jsx)(s.K0,{accessibilityLabel:a.bt("Dismiss", "Dismiss", "experiences.ExperienceModalWindow.modalDismissIconButton", undefined, true),bgColor:"washLight",icon:"close",iconColor:"default",onClick:()=>{g(123,75),p()},size:"lg"})})}),(0,P.jsx)(s.iX,{contentAspectRatio:.8,height:1.25*x,width:x,children:(0,P.jsx)(s._V,{alt:b.image.image_alt,color:b.image.dominant_color||void 0,fit:"cover",naturalHeight:b.image.height,naturalWidth:b.image.width,src:b.image.url})})]}),A=(0,P.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",paddingX:2,paddingY:3,children:[b.secondary_button&&(0,P.jsx)(_.A,{buttonType:"secondary",data:(0,f.q)(b.secondary_button,()=>{g(102,13005),p()}),experienceSchema:2}),(0,P.jsx)(_.A,{buttonType:"primary",data:(0,f.q)(b.primary_button,()=>{c<e.steps.length-1?(g(102,13004),u(c+1)):t()}),experienceSchema:2})]});return(0,P.jsx)(T,{accessibilityModalLabel:a.bt("Multi-step modal", "Multi Step Modal", "experiences.ExperienceMultiStepModal.accessibilityModalLabel", undefined, true),allowClickAndDrag:!1,footer:A,header:w,isOpen:l,mobileIsSlideUp:!0,onDismiss:()=>{g(123,16412),p()},size:"auto",children:(0,P.jsxs)(s.az,{padding:3,children:[(0,P.jsx)(s.az,{marginBottom:3,children:(0,P.jsx)(s._Y,{size:"500",children:b.title})}),(0,P.jsx)(s.KJ,{children:b.subtitle})]})})};function O({experience:e}){return(0,r.useEffect)(()=>{(0,n.A)("ExperienceMultiStepModal","/app/packages/experiences/Experiences/ExperienceMultiStepModal/ExperienceMultiStepModal.tsx")},[]),(0,P.jsx)(u.Je,{eligibleSchemas:[2],eligibleTypes:[26],experience:e,children:({complete:t,dismiss:i,experience:{display_data:n}})=>(0,P.jsx)(R,{complete:t,context_aux_data:{experience_id:e?.experience_id,placement_id:e?.placement_id},dismiss:i,display_data:n})})}var j=i(171768),M=i(777275),N=i(567176),k=i(693154),L=i(303196),z=i(214429),D=i(41206),H=i(601185),U=i(844255),F=i(430705),V=i(618243),B=i(328582),W=i(998556),$=i(319571),G=i(706466),Y=i(803489),K=i(971289),q=i(720575),J=i(807782),Q=i(825179),X=i(439524),Z=i(694804);i(487688);var ee=i(743372),et=i(168079),ei=i(328673);let en={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function er({currentTabIndex:e,tabBoards:t}){(0,r.useEffect)(()=>{(0,n.A)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let i=(0,r.useRef)(null),l=(0,r.useRef)(!1),d=(0,r.useRef)([]),c=(0,o.Zp)(),u=(0,y.A)(),p=(0,ee.A)(),h=(0,a.wA)(),m=t.length?[{href:"/",text:(0,P.jsx)(s.az,{children:u.bt("All", "All", "homefeed.moreIdeasTab.homefeedTab", undefined, true)}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},i)=>({href:`/?boardId=${String(e)}`,text:(0,P.jsx)(s.az,{dangerouslySetInlineStyle:en,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:d.current[i]}))]:null;if((0,et.A)(()=>{d.current=Array(t.length).fill(void 0).map((e,t)=>d.current[t]||(0,r.createRef)())}),(0,r.useEffect)(()=>()=>{l.current&&(window.cancelAnimationFrame(l.current),l.current=null)}),!m)return null;let _=m.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,P.jsx)(s.az,{ref:i,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,P.jsx)(s.tU,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let i=m?.[e];if(i){let n;n=i.boardId,h((0,ei.Y)(n,e));let r=1===i.tabType?u.bt("All", "All", "homefeed.moreIdeasTab.homefeedTab", undefined, true):t.find(e=>e.id===i.boardId)?.name;p({event_type:101,view_type:1,view_parameter:92,component:13184,element:1===i.tabType?11081:11082,aux_data:{index:e.toString(),board_id:i.boardId,referrer:19,tab_title:r},object_id_str:i.boardId})}let{pathname:n,state:r}=m?{pathname:(m[e]||m[0]).href,state:(m[e]||m[0]).locationState||void 0}:{};c(n,{state:r})},tabs:_})})}var ea=i(765346),eo=i(273919),es=i(863265),el=i(593936),ed=i(242978),ec=i(284247),eu=i(996209),ep=i(809756),eh=i(499053),em=i(699613);let e_=new s.rk(100);function ef({pinUrl:e,inviter:t}){(0,r.useEffect)(()=>{(0,n.A)("NuxSharedPinBanner","/app/www/pages/duplo/NuxSharedPinBanner.tsx")},[]);let i=(0,y.A)(),o=(0,em.HR)(),[l,d]=(0,r.useState)(!0),c=(0,a.wA)(),u=()=>c((0,eh.A)(null,null)),p=(0,eu.A)(e),{data:h}=(0,F.A)({name:"PinResource",options:{id:p,field_set_key:"detailed",is_mobile_fork:!0}}),m=p?o(p):null,_=h??m,f=_?.image_medium_url??_?.image_large_url,g=t.first_name??t.full_name??t.username??"",b=(0,ec.A)(i.bt("Tell {{ name }} what you think", "Tell {{ name }} what you think", "HomePage.SharedPinBannerTitle", undefined, true),{name:g}),{navFooterHeight:x}=(0,ep.o)();return p&&_&&g&&f&&l?(0,P.jsx)(s.az,{marginBottom:2,marginTop:2,paddingX:2,children:(0,P.jsx)(s.vF,{message:i.bt("See what inspired them and reply with your thoughts", "See what inspired them and reply with your thoughts", "HomePage.SharedPinBanner.Subtext", undefined, true),offset:{bottom:x+8,top:0},onDismiss:()=>{u(),d(!1)},primaryAction:{href:e+"&hide_app_upsell=true",label:i.bt("See Pin", "See Pin", "HomePage.SharedPinToastAction", undefined, true),accessibilityLabel:i.bt("See shared Pin", "See shared Pin", "HomePage.SharedPinToastAction.accessibilityLabel", undefined, true),onClick:u,role:"link"},secondaryAction:{accessibilityLabel:i.bt("Later", "Later", "HomePage.SharedPinBannerSecondary.accessibilityLabel", undefined, true),label:i.bt("Later", "Later", "HomePage.SharedPinBannerSecondary", undefined, true),onClick:()=>{u(),d(!1)},role:"button"},thumbnail:{image:(0,P.jsx)(s._V,{alt:"Shared Pin",color:"transparent",fit:"cover",naturalHeight:40,naturalWidth:40,src:f})},title:b,zIndex:e_})}):null}function eg(){(0,r.useEffect)(()=>{(0,n.A)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,el.d)(),{showToast:i}=(0,G.CG)(),a=(0,y.A)(),o=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(e&&!o.current){o.current=!0;let e=a.bt("Preferences updated! We're refreshing your feed now.", "Preferences updated! We're refreshing your feed now.", "PreferencesUpdatedBanner.message", undefined, true);i(({hideToast:i})=>(0,P.jsx)(N.A,{duration:3e3,onHide:()=>{i(),t(),o.current=!1},text:e}))}else e||(o.current=!1)},[e,t,i,a]),null}var eb=i(623987),ex=i(408738);function ew(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eA=(0,ex.A)(()=>i.e("82269").then(i.bind(i,922453)),void 0,e=>922453,"app-www-pages-duplo-CoreActionsHeader",e=>["82269"]),ev=(0,ex.A)(()=>i.e("65469").then(i.bind(i,497826)),void 0,e=>497826,"app-www-stories-FullWidthPinStory",e=>["65469"]),ey=(0,ex.A)(()=>i.e("11757").then(i.bind(i,50812)),{ssr:!1},e=>50812,void 0,void 0),eS=(0,ex.A)(()=>i.e("30764").then(i.bind(i,907748)),void 0,e=>907748,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["30764"]),eE=(0,ex.A)(()=>i.e("45231").then(i.bind(i,827279)),void 0,e=>827279,"app-www-stories-LandingPageStory-LandingPageStory",e=>["45231"]),eP=(0,ex.A)(()=>Promise.all([i.e("18324"),i.e("46782"),i.e("49412")]).then(i.bind(i,945101)),{ssr:!1},e=>945101,void 0,void 0),eI=(0,ex.A)(()=>Promise.all([i.e("43744"),i.e("99233")]).then(i.bind(i,308344)),{ssr:!1},e=>308344,void 0,void 0),eT=(0,ex.A)(()=>i.e("93920").then(i.bind(i,626531)),{ssr:!1},e=>626531,void 0,void 0),eC=(0,ex.A)(()=>Promise.all([i.e("91796"),i.e("28081")]).then(i.bind(i,668008)),{ssr:!1},e=>668008,void 0,void 0),eR=(0,r.lazy)(()=>i.e("98325").then(i.bind(i,757876))),eO=(0,r.lazy)(()=>i.e("72022").then(i.bind(i,21589))),ej=(0,r.lazy)(()=>i.e("39634").then(i.bind(i,92041))),eM=(0,r.lazy)(()=>i.e("41334").then(i.bind(i,64469))),eN=(0,r.lazy)(()=>i.e("9106").then(i.bind(i,286441))),ek=(0,r.lazy)(()=>i.e("99062").then(i.bind(i,562773))),eL={feedKey:ed.bg,trafficSource:ed.mA,resourceName:ed.jC,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},ez={first_page_size:"25",page_size:"10"},eD=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:i,pullToRefresh:n}=eL,r=(0,o.zy)(),d=(0,o.Zp)(),c=(0,a.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),u={webMobileHomeFeedTakoverExperience:e,location:r,navigate:d},p=(0,a.d4)(({feeds:e})=>e[t]??[]),{selectedUseCases:h,selectedPins:m}=(0,es.p)(),_=(0,ea.xx)(h,m),f=!c,g=_.length>0?{in_nux:c,nux_signals_map:_}:{in_nux:c},b={...ed.Vf,...f?{...ez}:{...g},in_local_navigation:!0,static_feed:!!(r&&(r.pathname.includes("pwt_performance_testing")||void 0!==(0,Y.A)(r.search).pwt_performance_testing))},x=(0,F.A)({name:ed.jC,options:b}),{isAtEnd:w,isFetching:A,fetchMore:v,data:y,refresh:S}=x,E={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,em.zy)())};c&&(0,C.GV)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let I=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,J.aR)(),{locale:t}=(0,U._8)(),i=(0,em.zy)();return({feedItems:n,prevFeedItems:r,finishedRefresh:a,unauthLandingPinStateForAuthHomefeed:{pinId:o,feedItem:s}})=>{if(!n.length)return null;if(a&&r.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),i=e(r,5),a=e(n,5),o={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,C.GV)("home_product.homefeed.refresh",{sampleRate:1,tags:o}),JSON.stringify(i)===JSON.stringify(a)&&(0,C.GV)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:o})}if(o&&!e){if(r.length>0&&r[0]!==n[0])return(0,W.y1)().removeItem(l.sH),{feedItem:null,pinId:null};else if((0===r.length||r[0]===n[0]&&r.length!==n.length||!s)&&i[o]&&!n.slice(0,5).some(({id:e})=>e===o))return{feedItem:{id:o,type:"pin",trackingParams:n[0].trackingParams},pinId:o}}return null}})(),T=y?.length?y[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:T?.id&&(0,P.jsx)(eb.A,{storyId:T.id,children:e=>(0,P.jsx)(ev,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},r=p.slice(1);return(0,P.jsx)(s.az,{"data-test-id":"homefeed",children:(0,P.jsx)(Q.RM,{authHomefeedComponentDidUpdate:I,feedItemProps:i&&i(u),feedItems:r,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!w,isLoadingNext:A,loadNext:()=>v(),refetch:()=>S()},pullToRefresh:n,trafficSource:ed.mA,visuallyCompleteProfilerOptions:E})})}return f&&!e?.display_data?(0,P.jsx)(s.az,{"data-test-id":"homefeed-ssr",children:(0,P.jsx)(Q.Ir,{authHomefeedComponentDidUpdate:I,feedItemProps:i&&i(u),feedKey:ed.bg,pullToRefresh:n,resource:x,serverRender:!0,trafficSource:ed.mA,visuallyCompleteProfilerOptions:E})}):(0,P.jsx)(s.az,{"data-test-id":"homefeed",children:(0,P.jsx)(Q.Ir,{authHomefeedComponentDidUpdate:I,feedItemProps:i&&i(u),feedKey:t,pullToRefresh:n,resource:x,trafficSource:ed.mA,visuallyCompleteProfilerOptions:E})})},eH=(0,ex.A)(()=>i.e("79716").then(i.bind(i,785327)),{ssr:!1},e=>785327,void 0,void 0),eU=(0,ex.A)(()=>i.e("83602").then(i.bind(i,413609)),{ssr:!1},e=>413609,void 0,void 0),eF=(0,ex.A)(()=>i.e("42948").then(i.bind(i,830255)),{ssr:!1},e=>830255,void 0,void 0),eV=(0,ex.A)(()=>i.e("78449").then(i.bind(i,153096)),{ssr:!1},e=>153096,void 0,void 0),eB=(0,ex.A)(()=>i.e("13099").then(i.bind(i,411206)),{ssr:!1},e=>411206,void 0,void 0),eW=(0,ex.A)(()=>i.e("78416").then(i.bind(i,256403)),{ssr:!1},e=>256403,void 0,void 0);class e$ extends r.PureComponent{constructor(...e){super(...e),ew(this,"state",{...(0,ea.of)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:0,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),ew(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:i,extraBlpImages:n}=this.state,r=!t&&e&&504192===e.experience_id,a=r&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&r?(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:a?(0,P.jsx)(eW,{experience:e,extraImageInfo:i.length>0?i:n,viewParameter:92,viewType:1}):(0,P.jsx)(eV,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:i,location:n}=e;return(0,Y.A)(n.search).show_qr_app_error?(i("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:i,showToast:n,navigate:r}=this.props,{sharedPinData:a}=this.state;(0,eo.h)(!1),(0,d.A)(),a&&Object.keys(a).length>0&&e(a),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&n(({hideToast:e})=>(0,P.jsx)(N.A,{duration:5e3,onHide:e,text:i.bt("We canâ€™t find that idea. Try searching for one just like it.", "We canâ€™t find that idea! Try searching for one just like it.", " - ", undefined, true),type:"error"})),(0,Y.A)(t.search).show_yip_modal&&(r("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,X.Y9)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:i,everythingFeedExperience:n,navigate:a,i18n:o,isAuthenticated:l,isEligibleForCoreActionsHeader:d,isPartner:h,location:m,moreIdeasStory:_,newUserWelcomeStoryExperience:f,webMobileHomeFeedTakoverExperience:g,selectedTabBoardId:b,tabBoards:x,shouldRefreshHomefeed:w}=this.props,{currentTabIndex:A,showUnlinkTokenExpiredModal:v,showDeleteAccountSurveyModal:y,showYipModal:S,shouldDismissCoreActionsHeader:E,showQRAppErrorBanner:I}=this.state,T=(0,Y.A)(m.search),C=T&&T.boardId||b;if(n&&!I)switch(n.experience_id){case 40002:case 10105:return(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_Nux",children:(0,P.jsx)(V.A,{fallback:(0,P.jsx)(B.A,{accessibilityLabel:this.props.i18n.bt("Loading new user education", "Loading new user education", "Loading spinner", undefined, true)}),children:h?(0,P.jsx)(eF,{experience:n}):(0,P.jsx)(eU,{experience:n})})});case 500681:return(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,P.jsx)(eH,{fallback:(0,P.jsx)(B.A,{accessibilityLabel:this.props.i18n.bt("Loading experience", "Loading experience", "loading experience spinner", undefined, true)})})})}let R=l&&e("mweb_hf_core_actions_header").anyEnabled&&d,N=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,P.jsx)(q.A,{viewParameter:92,viewType:1,children:(0,P.jsx)($.A,{view:1,viewParameter:92,children:(0,P.jsxs)(z.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[I&&(0,P.jsx)(s.az,{marginTop:4,children:(0,P.jsx)(ek,{})}),this.props.checkExperiment("ce_mweb_nux_shared_pin_banner").anyEnabled&&this.props.sessionSharedPinLandingInfo?.url&&this.props.sessionSharedPinLandingInfo?.inviter?(0,P.jsx)(ef,{inviter:this.props.sessionSharedPinLandingInfo.inviter,pinUrl:this.props.sessionSharedPinLandingInfo.url}):null,(0,P.jsx)(Z.A,{text:o.bt("Home", "Home", "HomePage.HiddenAccessibilityHeader", undefined, true)}),!!x?.length&&(0,P.jsx)(L.default,{hideOnScroll:l,noPadding:!0,overrideTop:0,children:(0,P.jsx)(s.az,{paddingY:1,children:(0,P.jsx)(er,{currentTabIndex:A,tabBoards:x||[]})})}),_&&(0,P.jsx)(s.az,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,P.jsx)(eb.A,{storyId:_.id||"",children:e=>(0,P.jsx)(ev,{slotIndex:0,story:e,viewParameter:92,viewType:1},_.id)})}),0!==A&&C&&A<=(x?.length??0)&&(0,P.jsx)(eS,{boardId:C})||(0,P.jsxs)(r.Fragment,{children:[(0,P.jsx)(O,{experience:n}),(0,P.jsx)(u.Vj,{experience:n,placementId:40001}),(0,P.jsx)(u.nU,{placementId:40001}),(0,P.jsx)(u.aR,{experience:n,placementId:40001}),(0,P.jsx)(p.A,{placementId:n?.placement_id}),(0,P.jsx)(M.A,{placementId:1000544}),(0,P.jsx)(j.A,{placementId:1000558}),(0,P.jsx)(u.Je,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:n,children:(0,P.jsx)(V.A,{children:(0,P.jsx)(eO,{experience:n})})}),n&&(0,P.jsx)(u.Je,{eligibleIds:[507483],experience:n,children:({dismiss:e,experience:{display_data:t}})=>{let i=!("is_blocking"in t)||t.is_blocking;return(0,P.jsx)(eP,{container:"HomePage",dismiss:e,isBlockingModal:i})}}),n&&(0,P.jsx)(u.Je,{eligibleIds:[507661],experience:n,children:({dismiss:e,experience:{display_data:t}})=>(0,P.jsx)(eI,{container:"HomePage",displayData:t,onDismiss:e})}),n&&(0,P.jsx)(u.Je,{eligibleIds:[507924],experience:n,children:({complete:e,dismiss:t})=>(0,P.jsx)(eT,{onComplete:e,onDismiss:t})}),n&&(0,P.jsx)(u.Je,{eligibleIds:[508387],experience:n,placementId:40001,children:({complete:e,dismiss:t,experience:i})=>(0,P.jsx)(eC,{complete:e,dismiss:t,experience:i})}),n&&(0,P.jsx)(u.Je,{eligibleIds:[505326],experience:n,children:({complete:e,dismiss:t})=>(0,P.jsx)(r.Suspense,{children:(0,P.jsx)(eN,{complete:e,dismiss:t})})}),n&&(0,P.jsx)(u.Je,{eligibleIds:[505801],experience:n,children:({complete:e})=>(0,P.jsx)(r.Suspense,{children:(0,P.jsx)(eM,{complete:e})})}),f?.display_data?.story&&f.display_data.showUpdatedLandingPageStory&&(0,P.jsx)(eE,{isMoreIdeasTabsVisible:!!x?.length,newUserWelcomeStoryExperience:f}),(0,P.jsxs)(s.az,{marginTop:2*(!x?.length&&!_),children:[!E&&R&&(0,P.jsx)(eA,{onDismiss:N,username:i||""}),(0,P.jsx)(eD,{webMobileHomeFeedTakoverExperience:g})]})]}),v&&(0,P.jsx)(V.A,{children:(0,P.jsx)(s.az,{"data-test-id":"unlink-expired-token",children:(0,P.jsx)(ej,{onDismiss:()=>{a("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),y&&(0,P.jsx)(V.A,{children:(0,P.jsx)(eR,{isPartner:h,onDismiss:()=>{a("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:i})}),S&&(0,P.jsx)(c.A,{name:"YearInPreviewConfirmPublishModal",children:(0,P.jsx)(eB,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),0===A&&n&&(0,P.jsx)(u.Je,{eligibleIds:[508418],experience:n,children:()=>w?(0,P.jsx)(eg,{}):(0,P.jsx)(ey,{hasTabBoards:(x?.length??0)>0})})]})})})}}let eG=[];function eY(){(0,r.useEffect)(()=>{(0,n.A)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,y.A)(),t=(0,a.wA)(),i=(0,k.A)(),{showToast:s}=(0,G.CG)(),l=(0,o.Zp)(),d=(0,o.zy)(),{checkExperiment:c}=(0,H.A)(),{shouldRefreshHomefeed:p,clearRefreshFlag:h}=(0,el.d)(),{experience:m}=(0,u.Rf)(40001),{experience:_}=(0,u.Rf)(1000115),{experience:f}=(0,u.Rf)(1000411),g=(0,a.d4)(({feeds:e})=>e.homefeed),b=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabBoardId),x=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:w,isLimitedLogin:A}=i,v=(0,a.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),S=(0,a.d4)(({session:e})=>e.sharedPinLandingInfo??null),E=i.isAuth?i.id:void 0,I=i.isAuth?i.username:void 0,T=!!i.isAuth&&i.isPartner,C=(0,K.qJ)(),R=Array.isArray(g)?g:[],O=!C&&R[0]&&"story"===R[0].type?R[0]:null,j=(0,a.d4)(({stories:e})=>O?e[O.id]:null),M=j&&j.story_type&&j.story_type.startsWith("boards_more_ideas_feed_upsell")?j:null,N=R.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:L}=(0,F.A)(w&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:i.id,field_set_key:"core_actions_header"}}:null),z=(0,K.M)();(0,D.A)(d,s,e);let U={checkExperiment:c,currentUserId:E,currentUsername:I,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:m,navigate:l,i18n:e,isAuthenticated:w,isEligibleForCoreActionsHeader:L?.is_eligible_for_core_actions_header,isLimitedLogin:A,isMobile:z,isPartner:T,location:d,moreIdeasStory:M,newUserWelcomeStoryExperience:f,selectedTabBoardId:b,selectedTabIndex:x,showToast:s,tabBoards:N??eG,webMobileHomeFeedTakoverExperience:_,shouldRefreshHomefeed:p,clearRefreshFlag:h,inNux:v,sessionSharedPinLandingInfo:S};return(0,P.jsx)(e$,{...U})}},242978(e,t,i){i.d(t,{Vf:()=>s,bg:()=>r,jC:()=>o,ks:()=>l,mA:()=>a});var n=i(788332);let r="homefeed",a="feed_home",o="UserHomefeedResource",s={field_set_key:"mobile_grid_item",prepend:!1},l=(0,n.A)(s)},328673(e,t,i){i.d(t,{Y:()=>n});let n=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},499053(e,t,i){i.d(t,{A:()=>n});function n(e,t){return{type:"SET_SHARED_PIN_LANDING_INFO",payload:{url:e,inviter:t}}}},987093(e,t,i){i.d(t,{AD:()=>m,X2:()=>u,e6:()=>d,sN:()=>c,x2:()=>p});var n=i(427471),r=i(257300),a=i(974694);function o(e,t,i,r){return n.A.create("UserFollowResource",{user_id:e,invite_code:r||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:i})}let s=(e,t,i,n)=>{let r=t().session?.userId;e((0,a.pV)(i,n)),r&&e((0,a.yX)(r,n))},l=(e,t,i,n)=>{s(e,t,i,!n)};function d(e,t=null,i,n){return(r,a)=>{s(r,a,e,!0),o(e,t,i,n).callCreate().catch(()=>{l(r,a,e,!0)})}}function c(e,t=null,i,n){return async(r,a)=>{s(r,a,e,!0),await o(e,t,i,n).callCreate().catch(t=>{throw l(r,a,e,!0),t})}}function u(e,t=null,i){return(n,r)=>{s(n,r,e,!1),o(e,t,i).callDelete().catch(()=>{l(n,r,e,!1)})}}function p(e,t=null,i){return async(n,r)=>{s(n,r,e,!1),await o(e,t,i).callDelete().catch(t=>{throw l(n,r,e,!1),t})}}let h=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),m=e=>t=>{e.length>0&&((0,r.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(h(e,!1))),t(h(e,!0)))}},974694(e,t,i){i.d(t,{Bt:()=>c,Fq:()=>p,LR:()=>a,Wi:()=>h,oH:()=>u,om:()=>d,pV:()=>o,yX:()=>s});var n=i(257300),r=i(805863);function a(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let o=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),s=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:i,blockContext:r,logContextEvent:a})=>async o=>{o(l(e,!0));let s=await (0,n.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:i,block_context:r}}).catch(()=>o(l(e,!1)));return a({event_type:54,object_id_str:e}),s},c=(e,t)=>async i=>{i(l(e,!1));let r=await (0,n.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>i(l(e,!0)));return t({event_type:55,object_id_str:e}),r};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let p=(e,t)=>()=>(0,n.A)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),h=(e,t,i)=>(a,o)=>{(0,n.A)({url:"/v3/users/me/",method:"POST"}).then(()=>{i({event_type:48,object_id_str:o().session.userId}),e(),(0,r.A)()},t)}},623987(e,t,i){i.d(t,{A:()=>r});var n=i(106386);function r({children:e,storyId:t}){let i=(0,n.d4)(({stories:e})=>e[t]);return i&&e(i)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/30202.en_GB-cef25942ff2ff221.mjs.map